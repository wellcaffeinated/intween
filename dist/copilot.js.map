{"version":3,"sources":["webpack://Copilot/webpack/universalModuleDefinition","webpack://Copilot/webpack/bootstrap","webpack://Copilot/./src/util/index.js","webpack://Copilot/./node_modules/easing-functions/index.js","webpack://Copilot/./src/transition.js","webpack://Copilot/./src/parsers/time.js","webpack://Copilot/./src/schema.js","webpack://Copilot/./src/type.js","webpack://Copilot/./src/interpolators.js","webpack://Copilot/./src/event-emitter.js","webpack://Copilot/./src/index.js","webpack://Copilot/./node_modules/process/browser.js","webpack://Copilot/./src/manager.js","webpack://Copilot/./src/frame.js","webpack://Copilot/./src/timeline.js","webpack://Copilot/./src/player.js","webpack://Copilot/./src/syncher.js","webpack://Copilot/./src/parsers/index.js","webpack://Copilot/./src/animation/smoothener.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","util","identity","a","process","now","time","hrtime","undefined","performance","Date","getTime","castArray","thing","Array","isArray","lerp","from","to","clamp","min","max","v","Math","mapProperties","obj","fn","keys","reduce","ret","pick","out","k","mergeIntersecting","first","second","sortedIndex","array","callback","retHighest","low","high","length","mid","computed","getIntersectingPaths","o1","o2","filter","Easing","Linear","None","Quadratic","In","Out","InOut","Cubic","Quartic","Quintic","Sinusoidal","cos","PI","sin","Exponential","pow","Circular","sqrt","Elastic","asin","Back","Bounce","startTime","endTime","frame","previousState","endState","state","startState","easing","meta","schema","timeFraction","nextState","prop","def","val","progress","interpolateProperty","interpolator","interpolatorOpts","duration","frac","opts","strOrNumber","parsed","match","timeStdReg","timeDecReg","unit","toLowerCase","h","parseFloat","round","schemaDef","props","DEFAULT_EASING","type","cfg","defaultVal","getType","getTypeCfg","Error","isExplicit","default","CUSTOM_TYPES","Number","Boolean","String","NATIVE_TYPES","Interpolators","Step","Pi2","shortestModDist","a0","a1","modulo","Angle","map","v1","idx","substr","threshold","getPriority","_priority_","EventEmitter","this","_topics","topic","scope","priority","listeners","orig","on","_bindfn_","_one_","_scope_","splice","listn","off","data","handler","e","one","Copilot","Manager","Util","Player","Syncher","Parsers","registerType","Animation","Smoothener","getTimeFraction","assign","ENUM","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","setTimeout","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","len","run","marker","runClearTimeout","Item","noop","nextTick","args","arguments","push","apply","title","browser","env","argv","version","versions","addListener","once","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask","DEFAULT_OPTIONS","defaultTransitionDuration","meddleTimeout","meddleRelaxDuration","meddleRelaxDelay","options","framesById","frames","timeline","_schema","createSchema","_defaultState","createState","_state","_prevState","unmeddle","createFrame","id","refreshTimeline","_updateState","createTimeline","meddleState","meddleOpts","relaxDuration","relaxDelay","freeze","meddle","_meddles","relaxState","active","toggle","forEach","timeParser","totalTime","getStateAt","_assignMeddleState","meddleTransitionState","getInterpolatedState","transition","transitions","getTransitionsAtTime","getStartState","reduceTransitions","frameId","getFrame","seek","defaultMetaOptions","defaults","META_PARSERS","parseMeta","$meta","DEFAULT_FRAME_META","percentDuration","pctReg","exec","implicit","fractionalDuration","test","defaultState","implicitFrames","f","sort","b","start","end","prevEndTime","getPrevEndTime","prevState","createTransitionFromFrame","conflicts","getConflictingFrames","paths","JSON","stringify","markers","indexOf","j","currTime","ep","initialState","tr","config","PlayerStack","step","requestAnimationFrame","playbackRate","manager","_clockTime","_time","_paused","attach","updateTime","paused","togglePause","_playToTime","_oldPlaybackRate","play","clockTime","dt","isPlaying","onFrame","getPlaybackRate","timeStarted","stop","lastClockTime","lastTime","update","syncTime","isPlayingVal","abs","destroy","targetState","smoothener","setState","newState"],"mappings":"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","file":"copilot.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Copilot\"] = factory();\n\telse\n\t\troot[\"Copilot\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n","const util = {}\nconst identity = a => a\n\n// From js - https://github.com/tweenjs/tween.js/blob/master/src/Tween.js\n// Include a performance.now polyfill.\n// In node.js, use process.hrtime.\nif (typeof (window) === 'undefined' && typeof (process) !== 'undefined') {\n  util.now = function now() {\n    var time = process.hrtime()\n\n    // Convert [seconds, nanoseconds] to milliseconds.\n    return time[0] * 1000 + time[1] / 1000000\n  }\n} else if (typeof (window) !== 'undefined' &&\n    window.performance !== undefined &&\n    window.performance.now !== undefined ) {\n  // In a browser, use window.performance.now if it is available.\n  // This must be bound, because directly assigning this function\n  // leads to an invocation exception in Chrome.\n  util.now = window.performance.now.bind(window.performance)\n} else if (Date.now !== undefined) {\n  // Use Date.now if it is available.\n  util.now = Date.now\n} else {\n  // Otherwise, use 'new Date().getTime()'.\n  util.now = function now() {\n    return new Date().getTime()\n  }\n}\n\nutil.castArray = function( thing ){\n  return Array.isArray(thing) ? thing : [thing]\n}\n\nutil.lerp = function( from, to, t ){\n  return from * ( 1 - t ) + to * t\n}\n\n// clamp\nutil.clamp = function( min, max, v ){\n  return Math.min(Math.max(v, min), max)\n}\n\nutil.mapProperties = function( obj, fn ){\n  return Object.keys( obj ).reduce( (ret, key) => {\n    ret[key] = fn(obj[key], key)\n    return ret\n  }, {} )\n}\n\nutil.pick = function( obj, keys = [] ){\n  if ( !keys ){\n    // all\n    return { ...obj }\n  }\n  return keys.reduce( (out, k) => {\n    out[k] = obj[k]\n    return out\n  }, {})\n}\n\n// Only take properties that are present in\n// first object\n// ---------------------------------------\nutil.mergeIntersecting = function( first, second ){\n  return {\n    ...first\n    , ...util.pick(\n      second\n      , Object.keys(first)\n    )\n  }\n}\n\n/**\n * util.sortedIndex( array, value[, callback] ) -> Number\n * - array (Array): The array to inspect\n * - value (Mixed): The value to evaluate\n * - callback (Function): Function called per iteration\n * - retHighest (Boolean): Specify returning the highest qualified index\n *\n * Implementation of [lodash.sortedIndex](http://lodash.com/docs#sortedIndex).\n **/\nutil.sortedIndex = function( array, value, callback, retHighest ) {\n  let low = 0\n  let high = array ? array.length : low\n\n  // explicitly reference `identity` for better inlining in Firefox\n  callback = callback || identity\n  value = callback(value)\n\n  while (low < high) {\n    let mid = (low + high) >>> 1\n    let computed = callback(array[mid])\n\n    if ( retHighest ? (computed <= value) : (computed < value) ){\n      low = mid + 1\n    } else {\n      high = mid\n    }\n  }\n\n  return low\n}\n\nutil.getIntersectingPaths = function ( o1, o2 ){\n  return Object.keys(o1).filter(\n    Object.prototype.hasOwnProperty.bind( o2 )\n  )\n}\n\nexport default util\n","/**\n* A collection of easing methods defining ease-in ease-out curves.\n*\n* @class Easing\n*/\nvar Easing = module.exports = {\n\n    /**\n    * Linear easing.\n    *\n    * @class Easing.Linear\n    */\n    Linear: {\n\n        /**\n        * Ease-in.\n        *\n        * @method Easing.Linear#In\n        * @param {number} k - The value to be tweened.\n        * @returns {number} k^2.\n        */\n        None: function ( k ) {\n\n            return k;\n\n        }\n\n    },\n\n    /**\n    * Quadratic easing.\n    *\n    * @class Easing.Quadratic\n    */\n    Quadratic: {\n\n        /**\n        * Ease-in.\n        *\n        * @method Easing.Quadratic#In\n        * @param {number} k - The value to be tweened.\n        * @returns {number} k^2.\n        */\n        In: function ( k ) {\n\n            return k * k;\n\n        },\n\n        /**\n        * Ease-out.\n        *\n        * @method Easing.Quadratic#Out\n        * @param {number} k - The value to be tweened.\n        * @returns {number} k* (2-k).\n        */\n        Out: function ( k ) {\n\n            return k * ( 2 - k );\n\n        },\n\n        /**\n        * Ease-in/out.\n        *\n        * @method Easing.Quadratic#InOut\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        InOut: function ( k ) {\n\n            if ( ( k *= 2 ) < 1 ) return 0.5 * k * k;\n            return - 0.5 * ( --k * ( k - 2 ) - 1 );\n\n        }\n\n    },\n\n    /**\n    * Cubic easing.\n    *\n    * @class Easing.Cubic\n    */\n    Cubic: {\n\n        /**\n        * Cubic ease-in.\n        *\n        * @method Easing.Cubic#In\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        In: function ( k ) {\n\n            return k * k * k;\n\n        },\n\n        /**\n        * Cubic ease-out.\n        *\n        * @method Easing.Cubic#Out\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        Out: function ( k ) {\n\n            return --k * k * k + 1;\n\n        },\n\n        /**\n        * Cubic ease-in/out.\n        *\n        * @method Easing.Cubic#InOut\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        InOut: function ( k ) {\n\n            if ( ( k *= 2 ) < 1 ) return 0.5 * k * k * k;\n            return 0.5 * ( ( k -= 2 ) * k * k + 2 );\n\n        }\n\n    },\n\n    /**\n    * Quartic easing.\n    *\n    * @class Easing.Quartic\n    */\n    Quartic: {\n\n        /**\n        * Quartic ease-in.\n        *\n        * @method Easing.Quartic#In\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        In: function ( k ) {\n\n            return k * k * k * k;\n\n        },\n\n        /**\n        * Quartic ease-out.\n        *\n        * @method Easing.Quartic#Out\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        Out: function ( k ) {\n\n            return 1 - ( --k * k * k * k );\n\n        },\n\n        /**\n        * Quartic ease-in/out.\n        *\n        * @method Easing.Quartic#InOut\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        InOut: function ( k ) {\n\n            if ( ( k *= 2 ) < 1) return 0.5 * k * k * k * k;\n            return - 0.5 * ( ( k -= 2 ) * k * k * k - 2 );\n\n        }\n\n    },\n\n    /**\n    * Quintic easing.\n    *\n    * @class Easing.Quintic\n    */\n    Quintic: {\n\n        /**\n        * Quintic ease-in.\n        *\n        * @method Easing.Quintic#In\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        In: function ( k ) {\n\n            return k * k * k * k * k;\n\n        },\n\n        /**\n        * Quintic ease-out.\n        *\n        * @method Easing.Quintic#Out\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        Out: function ( k ) {\n\n            return --k * k * k * k * k + 1;\n\n        },\n\n        /**\n        * Quintic ease-in/out.\n        *\n        * @method Easing.Quintic#InOut\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        InOut: function ( k ) {\n\n            if ( ( k *= 2 ) < 1 ) return 0.5 * k * k * k * k * k;\n            return 0.5 * ( ( k -= 2 ) * k * k * k * k + 2 );\n\n        }\n\n    },\n\n    /**\n    * Sinusoidal easing.\n    *\n    * @class Easing.Sinusoidal\n    */\n    Sinusoidal: {\n\n        /**\n        * Sinusoidal ease-in.\n        *\n        * @method Easing.Sinusoidal#In\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        In: function ( k ) {\n\n            return 1 - Math.cos( k * Math.PI / 2 );\n\n        },\n\n        /**\n        * Sinusoidal ease-out.\n        *\n        * @method Easing.Sinusoidal#Out\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        Out: function ( k ) {\n\n            return Math.sin( k * Math.PI / 2 );\n\n        },\n\n        /**\n        * Sinusoidal ease-in/out.\n        *\n        * @method Easing.Sinusoidal#InOut\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        InOut: function ( k ) {\n\n            return 0.5 * ( 1 - Math.cos( Math.PI * k ) );\n\n        }\n\n    },\n\n    /**\n    * Exponential easing.\n    *\n    * @class Easing.Exponential\n    */\n    Exponential: {\n\n        /**\n        * Exponential ease-in.\n        *\n        * @method Easing.Exponential#In\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        In: function ( k ) {\n\n            return k === 0 ? 0 : Math.pow( 1024, k - 1 );\n\n        },\n\n        /**\n        * Exponential ease-out.\n        *\n        * @method Easing.Exponential#Out\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        Out: function ( k ) {\n\n            return k === 1 ? 1 : 1 - Math.pow( 2, - 10 * k );\n\n        },\n\n        /**\n        * Exponential ease-in/out.\n        *\n        * @method Easing.Exponential#InOut\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        InOut: function ( k ) {\n\n            if ( k === 0 ) return 0;\n            if ( k === 1 ) return 1;\n            if ( ( k *= 2 ) < 1 ) return 0.5 * Math.pow( 1024, k - 1 );\n            return 0.5 * ( - Math.pow( 2, - 10 * ( k - 1 ) ) + 2 );\n\n        }\n\n    },\n\n    /**\n    * Circular easing.\n    *\n    * @class Easing.Circular\n    */\n    Circular: {\n\n        /**\n        * Circular ease-in.\n        *\n        * @method Easing.Circular#In\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        In: function ( k ) {\n\n            return 1 - Math.sqrt( 1 - k * k );\n\n        },\n\n        /**\n        * Circular ease-out.\n        *\n        * @method Easing.Circular#Out\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        Out: function ( k ) {\n\n            return Math.sqrt( 1 - ( --k * k ) );\n\n        },\n\n        /**\n        * Circular ease-in/out.\n        *\n        * @method Easing.Circular#InOut\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        InOut: function ( k ) {\n\n            if ( ( k *= 2 ) < 1) return - 0.5 * ( Math.sqrt( 1 - k * k) - 1);\n            return 0.5 * ( Math.sqrt( 1 - ( k -= 2) * k) + 1);\n\n        }\n\n    },\n\n    /**\n    * Elastic easing.\n    *\n    * @class Easing.Elastic\n    */\n    Elastic: {\n\n        /**\n        * Elastic ease-in.\n        *\n        * @method Easing.Elastic#In\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        In: function ( k ) {\n\n            var s, a = 0.1, p = 0.4;\n            if ( k === 0 ) return 0;\n            if ( k === 1 ) return 1;\n            if ( !a || a < 1 ) { a = 1; s = p / 4; }\n            else s = p * Math.asin( 1 / a ) / ( 2 * Math.PI );\n            return - ( a * Math.pow( 2, 10 * ( k -= 1 ) ) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) );\n\n        },\n\n        /**\n        * Elastic ease-out.\n        *\n        * @method Easing.Elastic#Out\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        Out: function ( k ) {\n\n            var s, a = 0.1, p = 0.4;\n            if ( k === 0 ) return 0;\n            if ( k === 1 ) return 1;\n            if ( !a || a < 1 ) { a = 1; s = p / 4; }\n            else s = p * Math.asin( 1 / a ) / ( 2 * Math.PI );\n            return ( a * Math.pow( 2, - 10 * k) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) + 1 );\n\n        },\n\n        /**\n        * Elastic ease-in/out.\n        *\n        * @method Easing.Elastic#InOut\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        InOut: function ( k ) {\n\n            var s, a = 0.1, p = 0.4;\n            if ( k === 0 ) return 0;\n            if ( k === 1 ) return 1;\n            if ( !a || a < 1 ) { a = 1; s = p / 4; }\n            else s = p * Math.asin( 1 / a ) / ( 2 * Math.PI );\n            if ( ( k *= 2 ) < 1 ) return - 0.5 * ( a * Math.pow( 2, 10 * ( k -= 1 ) ) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) );\n            return a * Math.pow( 2, -10 * ( k -= 1 ) ) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) * 0.5 + 1;\n\n        }\n\n    },\n\n    /**\n    * Back easing.\n    *\n    * @class Easing.Back\n    */\n    Back: {\n\n        /**\n        * Back ease-in.\n        *\n        * @method Easing.Back#In\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        In: function ( k ) {\n\n            var s = 1.70158;\n            return k * k * ( ( s + 1 ) * k - s );\n\n        },\n\n        /**\n        * Back ease-out.\n        *\n        * @method Easing.Back#Out\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        Out: function ( k ) {\n\n            var s = 1.70158;\n            return --k * k * ( ( s + 1 ) * k + s ) + 1;\n\n        },\n\n        /**\n        * Back ease-in/out.\n        *\n        * @method Easing.Back#InOut\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        InOut: function ( k ) {\n\n            var s = 1.70158 * 1.525;\n            if ( ( k *= 2 ) < 1 ) return 0.5 * ( k * k * ( ( s + 1 ) * k - s ) );\n            return 0.5 * ( ( k -= 2 ) * k * ( ( s + 1 ) * k + s ) + 2 );\n\n        }\n\n    },\n\n    /**\n    * Bounce easing.\n    *\n    * @class Easing.Bounce\n    */\n    Bounce: {\n\n        /**\n        * Bounce ease-in.\n        *\n        * @method Easing.Bounce#In\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        In: function ( k ) {\n\n            return 1 - Easing.Bounce.Out( 1 - k );\n\n        },\n\n        /**\n        * Bounce ease-out.\n        *\n        * @method Easing.Bounce#Out\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        Out: function ( k ) {\n\n            if ( k < ( 1 / 2.75 ) ) {\n\n                return 7.5625 * k * k;\n\n            } else if ( k < ( 2 / 2.75 ) ) {\n\n                return 7.5625 * ( k -= ( 1.5 / 2.75 ) ) * k + 0.75;\n\n            } else if ( k < ( 2.5 / 2.75 ) ) {\n\n                return 7.5625 * ( k -= ( 2.25 / 2.75 ) ) * k + 0.9375;\n\n            } else {\n\n                return 7.5625 * ( k -= ( 2.625 / 2.75 ) ) * k + 0.984375;\n\n            }\n\n        },\n\n        /**\n        * Bounce ease-in/out.\n        *\n        * @method Easing.Bounce#InOut\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        InOut: function ( k ) {\n\n            if ( k < 0.5 ) return Easing.Bounce.In( k * 2 ) * 0.5;\n            return Easing.Bounce.Out( k * 2 - 1 ) * 0.5 + 0.5;\n\n        }\n\n    }\n\n};","import util from '@/util'\n\nexport function createTransitionFromFrame( startTime, endTime, frame, previousState ){\n  let endState = frame.state\n  let startState = util.pick( previousState, Object.keys(endState) )\n  let easing = frame.meta.easing\n\n  return {\n    startTime\n    , endTime\n    , startState\n    , endState\n    , easing\n    , frame\n  }\n}\n\nexport function interpolateProperty( fn, from, to, progress, opts = {} ){\n  return fn( from, to, progress, opts )\n}\n\nexport function getInterpolatedState( schema, startState, endState, timeFraction, easing ){\n\n  if ( timeFraction <= 0 ){\n    return { ...startState }\n  }\n\n  if ( timeFraction >= 1 ){\n    return { ...endState }\n  }\n\n  let nextState = { ...startState }\n\n  for ( let prop in endState ){\n    let def = schema[prop]\n    let val\n\n    if ( !def ){\n      // not specified in schema. just set\n      val = endState[ prop ]\n    } else {\n      easing = easing || def.easing\n      let progress = easing( timeFraction )\n\n      val = interpolateProperty(\n        def.interpolator\n        , nextState[ prop ]\n        , endState[ prop ]\n        , progress\n        , def.interpolatorOpts\n      )\n    }\n\n    nextState[ prop ] = val\n  }\n\n  return nextState\n}\n\nexport function getTimeFraction( startTime, endTime, time ){\n  let duration = endTime - startTime\n  let frac = duration ? (time - startTime) / duration : 1\n\n  return util.clamp(0, 1, frac)\n}\n","const timeDecReg = /([0-9.]+)(s|m|h)?/\nconst timeStdReg = /((\\d\\d):)?((\\d\\d):(\\d\\d))/\nconst MINUTES = 60\nconst HOURS = 60 * 60\n\nfunction getTime( h, m, s ){\n  h = parseFloat( h || 0 )\n  m = parseFloat( m || 0 )\n  s = parseFloat( s || 0 )\n  return Math.round( (h * HOURS + m * MINUTES + s) * 1000 ) // integer\n}\n\n// returns parsed time in ms\nexport function timeParser( strOrNumber ){\n  if ( typeof strOrNumber !== 'string' ){\n    return strOrNumber\n  }\n\n  let parsed = strOrNumber.match(timeStdReg)\n\n  if ( parsed ){\n    return getTime( parsed[2], parsed[4], parsed[5] )\n  }\n\n  parsed = strOrNumber.match(timeDecReg)\n\n  if ( parsed ){\n    let unit = ('' + parsed[2]).toLowerCase()\n\n    if ( !parsed[1] || unit === 's' ){\n      return getTime( 0, 0, parsed[1] )\n    }\n\n    if ( unit === 'm' ){\n      return getTime( 0, parsed[1], 0 )\n    }\n\n    if ( unit === 'h' ){\n      return getTime( parsed[1], 0, 0 )\n    }\n  }\n\n  return 0\n}\n","import Easing from 'easing-functions'\nimport { isExplicit, getType, getTypeCfg } from '@/type'\n\nconst DEFAULT_EASING = Easing.Linear.None\n\nexport function createSchema( schemaDef ){\n  let schema = {}\n  let props = Object.keys( schemaDef )\n\n  for ( let prop of props ){\n    let def = schemaDef[ prop ]\n    let easing = DEFAULT_EASING\n    let interpolator = null\n    let interpolatorOpts = def.interpolatorOpts || {}\n    let type\n    let cfg\n    let defaultVal\n\n    if ( typeof def === 'object' && def.type !== undefined ){\n      type = getType( def.type )\n      cfg = getTypeCfg( type )\n      if ( !cfg ){\n        throw new Error(`Unrecognized type ${type}`)\n      }\n\n      if ( isExplicit( type, def.type ) ){\n        defaultVal = def.default || cfg.default\n      } else {\n        defaultVal = def.type\n      }\n\n      easing = def.easing || DEFAULT_EASING\n      interpolator = def.interpolator || cfg.interpolator\n\n    } else {\n      if ( typeof def === 'string' ){\n        type = 'string'\n      } else {\n        type = getType( def )\n      }\n\n      cfg = getTypeCfg( type )\n      if ( !cfg ){\n        throw new Error(`Unrecognized type ${type}`)\n      }\n\n      easing = def.easing || DEFAULT_EASING\n      interpolator = cfg.interpolator\n      defaultVal = isExplicit( type, def ) ? cfg.default : def\n    }\n\n    schema[ prop ] = {\n      type\n      , easing\n      , default: defaultVal\n      , interpolator: interpolator\n      , interpolatorOpts\n      , def\n    }\n  }\n\n  return schema\n}\n\nexport function createState( schema ){\n  let state = {}\n  let props = Object.keys( schema )\n\n  for ( let prop of props ){\n    state[ prop ] = schema[ prop ].default\n  }\n\n  return state\n}\n","import Interpolators from '@/interpolators'\n\nexport const NATIVE_TYPES = {\n  'number': {\n    type: 'number'\n    , default: 0\n    , interpolator: Interpolators.Linear\n  }\n  , 'string': {\n    type: 'string'\n    , default: ''\n    , interpolator: Interpolators.String\n  }\n  , 'boolean': {\n    type: 'boolean'\n    , default: false\n    , interpolator: Interpolators.Step\n  }\n  , 'array': {\n    type: 'array'\n    , default: []\n    , interpolator: Interpolators.Array\n  }\n  , 'object': {\n    type: 'object'\n    , default: {}\n    , interpolator: Interpolators.Object\n  }\n}\n\nconst CUSTOM_TYPES = {}\n\nexport function registerType( cfg ){\n  let { type, interpolator } = cfg\n\n  if ( !type || !interpolator ){\n    throw new Error('Custom types must have \"type\" and \"interpolator\" specified')\n  }\n\n  if ( CUSTOM_TYPES[type] ){\n    throw new Error(`Custom type \"${type}\" is already registered`)\n  }\n\n  CUSTOM_TYPES[ type ] = {\n    type\n    , interpolator\n    , default: cfg.default\n  }\n}\n\nexport function getType( val ){\n  let type = typeof val\n\n  if ( type === 'string' ){\n    return val\n  }\n\n  if ( val === Number || type === 'number' ){\n    return 'number'\n  }\n\n  if ( val === Boolean || type === 'boolean' ){\n    return 'boolean'\n  }\n\n  if ( val === String ){\n    return 'string'\n  }\n\n  if ( val === Array || Array.isArray( val ) ){\n    return 'array'\n  }\n\n  if ( val === Object ){\n    return 'object'\n  }\n\n  if ( type === 'object' ){\n    throw new Error('Can not use implicit definition for objects or custom types')\n  }\n\n  return type\n}\n\n// determine if the schema declaration is an explicit declaration\n// of the type. eg: (type: 2) is implicit number\nexport function isExplicit( type, val ){\n  if ( type === 'string' ){\n    return val === 'string' || val === String\n  }\n\n  if ( type === 'number' ){\n    return val === 'number' || val === Number\n  }\n\n  if ( type === 'boolean' ){\n    return val === 'boolean' || val === Boolean\n  }\n\n  if ( type === 'array' ){\n    return val === 'array' || val === Array\n  }\n\n  if ( type === 'object' ){\n    return val === 'object' || val === Object\n  }\n\n  return true\n}\n\nexport function getTypeCfg( type ){\n  return NATIVE_TYPES[ type ] || CUSTOM_TYPES[ type ]\n}\n","import util from '@/util'\n\nconst Pi2 = Math.PI * 2\n\nfunction shortestModDist( a0, a1, modulo ) {\n  // let moduloBy2 = 0.5 * modulo\n  let da = (a1 - a0) % modulo\n\n  return (da - modulo) % modulo\n}\n\n// function toCharCodes( str ){\n//   return str.split('').map( c => c.charCodeAt() )\n// }\n\nconst Interpolators = {\n  Linear: ( from, to, t, opts = {} ) => opts.modulo ?\n    from + shortestModDist(from, to, opts.modulo) * t :\n    util.lerp( from, to, t )\n  , Angle: ( from, to, t, opts = {} ) => from + shortestModDist(from, to, Pi2) * t\n  , Array: ( from, to, t, opts = {} ) => to.map( (v1, idx) => Interpolators.Linear( from[idx] || 0, v1 || 0, t ) )\n  , Object: ( from, to, t, opts = {} ) =>\n    util.mapProperties( from, (val, key) =>\n      Interpolators.Linear( val, to[key], t )\n    )\n  , String: ( from, to, t, opts = {} ) => {\n    if ( t <= 0 ){ return from }\n\n    let length = util.lerp( 0, to.length, t ) | 0 // to integer\n\n    return to.substr(0, length)\n  }\n  , Step: ( from, to, t, { threshold = 0.5 } = {} ) => (t > threshold) ? to : from\n}\n\nexport default Interpolators\n","import util from '@/util'\n\nconst defaultPriority = 1\n\nfunction getPriority( val ){\n  return val._priority_\n}\n\nexport default class EventEmitter {\n  constructor(){\n    // ensure topics hash is initialized\n    this._topics = this._topics || (this._topics = {})\n  }\n  /**\n  * EventEmitter#on( topic, fn( data, event )[, scope, priority] ) -> this\n  * EventEmitter#on( topicConfig[, scope, priority] ) -> this\n  * - topic (String): The topic name\n  * - topicConfig (Object): A config with key/value pairs of `{ topic: callbackFn, ... }`\n  * - fn (Function): The callback function (if not using Object as previous argument)\n  * - data (Mixed): The data sent from the call to `.emit()`\n  * - event (Object): Event data, holding `.topic`, the topic, and `.handler`, the `fn` callback.\n  * - scope (Object): The scope to bind callback to\n  * - priority (Number): The priority of the callback (higher is earlier)\n  *\n  * Subscribe callback(s) to a topic(s).\n  **/\n  on( topic, fn, scope, priority ){\n\n    let listeners\n    let orig\n    let idx\n\n    // check if we're subscribing to multiple topics\n    // with an object\n    if ( typeof topic === 'object' ){\n\n      for ( let t in topic ){\n        this.on( t, topic[ t ], fn, scope )\n      }\n\n      return this\n    }\n\n    listeners = this._topics[ topic ] || (this._topics[ topic ] = [])\n    orig = fn\n\n    if ( typeof scope === 'object' ){\n\n      fn = fn.bind( scope )\n      fn._bindfn_ = orig\n      fn._one_ = orig._one_\n      fn._scope_ = scope\n\n    } else if ( priority === undefined ) {\n\n      priority = scope\n    }\n\n    fn._priority_ = priority === undefined ? defaultPriority : priority\n\n    idx = util.sortedIndex( listeners, fn, getPriority )\n\n    listeners.splice( idx, 0, fn )\n    return this\n  }\n\n  /**\n  * EventEmitter#off( topic, fn[, scope] ) -> this\n  * EventEmitter#off( topicCfg ) -> this\n  * - topic (String): topic The topic name. Specify `true` to remove all listeners for all topics\n  * - topicCfg (Object): A config with key/value pairs of `{ topic: callbackFn, ... }`\n  * - fn (Function): The original callback function. Specify `true` to remove all listeners for specified topic\n  * - scope (Object): The scope the callback was bound to. This is important if you are\n  *   binding methods that come from object prototypes.\n  *\n  * Unsubscribe callback(s) from topic(s).\n  **/\n  off( topic, fn, scope ){\n\n    let listeners\n    let listn\n\n    if ( topic === true ){\n      // purge all listeners\n      this._topics = {}\n      return this\n    }\n\n    // check if we're subscribing to multiple topics\n    // with an object\n    if ( typeof topic === 'object' ){\n\n      for ( let t in topic ){\n\n        this.off( t, topic[ t ] )\n      }\n\n      return this\n    }\n\n    listeners = this._topics[ topic ]\n\n    if (!listeners){\n      return this\n    }\n\n    if ( fn === true ){\n      // purge all listeners for topic\n      this._topics[ topic ] = []\n      return this\n    }\n\n    for ( let i = 0, l = listeners.length; i < l; i++ ){\n\n      listn = listeners[ i ]\n\n      if (\n        (listn._bindfn_ === fn || listn === fn) &&\n        ( (!scope) || listn._scope_ === scope) // check the scope too if specified\n      ){\n        listeners.splice( i, 1 )\n        break\n      }\n    }\n\n    return this\n  }\n\n  /**\n  * EventEmitter#emit( topic[, data] ) -> this\n  * - topic (String): The topic name\n  * - data (Mixed): The data to send\n  *\n  * Publish data to a topic.\n  **/\n  emit( topic, data ){\n\n    let listeners = this._topics[ topic ]\n    let l = listeners && listeners.length\n    let handler\n    let e\n\n    if ( !l ){\n      return this\n    }\n\n    e = {}\n    // event data\n    e.topic = topic\n    e.handler = handler\n\n    // reverse iterate so priorities work out correctly\n    while ( l-- ){\n\n      handler = listeners[ l ]\n      handler( data, e )\n\n      // if _one_ flag is set, the unsubscribe\n      if ( handler._one_ ){\n        listeners.splice( l, 1 )\n      }\n    }\n\n    return this\n  }\n\n  /**\n  * EventEmitter#one( topic, fn( data, event )[, scope, priority] ) -> this\n  * EventEmitter#one( topicConfig[, scope, priority] ) -> this\n  * - topic (String): The topic name\n  * - topicConfig (Object): A config with key/value pairs of `{ topic: callbackFn, ... }`\n  * - fn (Function): The callback function (if not using Object as previous argument)\n  * - data (Mixed): The data sent from the call to `.emit()`\n  * - event (Object): Event data, holding `.topic`, the topic, and `.handler`, the `fn` callback.\n  * - scope (Object): The scope to bind callback to\n  * - priority (Number): The priority of the callback (higher is earlier)\n  *\n  * Subscribe callback(s) to a topic(s), but only ONCE.\n  **/\n  one( topic, fn, scope ){\n\n    // check if we're subscribing to multiple topics\n    // with an object\n    if ( typeof topic === 'object' ){\n\n      for ( let t in topic ){\n\n        this.one( t, topic[ t ], fn, scope )\n      }\n\n      return this\n    }\n\n    // set the _one_ flag\n    fn._one_ = true\n    this.on( topic, fn, scope )\n\n    return this\n  }\n}\n","import Easing from 'easing-functions'\nimport util from '@/util'\nimport Manager from '@/manager'\nimport Interpolators from '@/interpolators'\nimport Player from '@/player'\nimport Syncher from '@/syncher'\nimport Parsers from '@/parsers'\nimport { getTimeFraction, interpolateProperty } from '@/transition'\nimport { Smoothener } from '@/animation/smoothener'\nimport { registerType } from '@/type'\nimport * as ENUM from '@/enum'\n\nconst Copilot = function( schema, meta ){\n  return new Manager( schema, meta )\n}\n\nCopilot.Util = util\nCopilot.Easing = Easing\nCopilot.Interpolators = Interpolators\nCopilot.Player = Player\nCopilot.Syncher = Syncher\nCopilot.Parsers = Parsers\nCopilot.registerType = registerType\nCopilot.Animation = { Smoothener, getTimeFraction, interpolateProperty }\nObject.assign(Copilot, ENUM)\n\nexport default Copilot\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","import util from '@/util'\nimport Easing from 'easing-functions'\nimport { createSchema, createState } from '@/schema'\nimport { getTimeFraction, getInterpolatedState } from '@/transition'\nimport { createFrame } from '@/frame'\nimport { timeParser } from '@/parsers/time'\nimport {\n  getTransitionsAtTime\n  , createTimeline\n  , reduceTransitions\n  , getStartState\n} from '@/timeline'\nimport EventEmitter from '@/event-emitter'\n\nconst DEFAULT_OPTIONS = {\n  defaultTransitionDuration: 1000\n  , meddleTimeout: 2000\n  , meddleRelaxDuration: 500\n  , meddleRelaxDelay: 1000\n}\n\nconst DEFAULT_MEDDLE = '__DEFAULT__'\n\nexport default class extends EventEmitter {\n  constructor( schema, options ){\n    super()\n\n    this.time = 0\n    this.framesById = {}\n    this.frames = []\n    this.timeline = []\n\n    this._schema = createSchema( schema )\n    this._defaultState = createState( this._schema )\n    this._state = { ...this._defaultState }\n    this._prevState = { ...this._defaultState }\n\n    this.options = Object.assign({}, DEFAULT_OPTIONS, options)\n    // reset\n    this.unmeddle()\n  }\n\n  get state(){\n    return this._state\n  }\n\n  get totalTime(){\n    return this.timeline[this.timeline.length - 1].time\n  }\n\n  get progress(){\n    return this.time / this.totalTime * 100\n  }\n\n  // add a frame\n  add( state, meta ){\n\n    let frame = createFrame(state, meta, {\n      duration: this.options.defaultTransitionDuration\n    })\n\n    if ( frame.meta.id && this.framesById[frame.meta.id] ){\n      throw new Error(`Frame with id \"${frame.meta.id}\" already defined`)\n    }\n\n    // add to id list\n    if ( frame.meta.id ){\n      this.framesById[ frame.meta.id ] = frame\n    }\n\n    this.frames.push( frame )\n    this.refreshTimeline()\n    this._updateState()\n    return this\n  }\n\n  refreshTimeline(){\n    this.timeline = createTimeline( this._schema, this.frames )\n    return this\n  }\n\n  // toggle user meddling\n  meddle( name, meddleState, meddleOpts = {} ){\n    if ( typeof name !== 'string' ){\n      meddleOpts = meddleState\n      meddleState = name\n      name = DEFAULT_MEDDLE\n    }\n\n    let { relaxDuration, relaxDelay, freeze, easing } = meddleOpts\n\n    relaxDelay = relaxDelay !== undefined ? relaxDelay : this.options.meddleRelaxDelay\n    relaxDuration = relaxDuration !== undefined ? relaxDuration : this.options.meddleRelaxDuration\n\n    let meddle = this._meddles[ name ]\n\n    if ( !meddle ){\n      meddle = this._meddles[ name ] = { state: {} }\n    }\n\n    meddle.state = { ...meddle.state, ...meddleState }\n\n    meddle.startTime = false\n    meddle.relaxState = null\n    meddle.active = true\n    meddle.freeze = freeze\n    meddle.relaxDelay = relaxDelay\n    meddle.relaxDuration = relaxDuration\n    meddle.easing = easing || Easing.Linear.None\n\n    this._updateState()\n    return this\n  }\n\n  // force meddling to reset\n  unmeddle( name ){\n    if ( !name ){\n      this._meddles = {}\n      return this\n    }\n\n    delete this._meddles[name]\n\n    return this\n  }\n\n  // toggle freezing of meddle states\n  freeze( toggle = true, name = DEFAULT_MEDDLE ){\n\n    if ( name !== true ){\n      let m = this._meddles[ name ]\n\n      if ( m ){\n        m.freeze = toggle\n      }\n\n      return this\n    }\n\n    Object.keys(this._meddles).forEach( k => {\n      let m = this._meddles[ k ]\n\n      m.freeze = toggle\n    })\n\n    return this\n  }\n\n  getFrame( id ){\n    let frame = this.framesById[id]\n\n    return frame\n  }\n\n  seek( time ){\n    time = timeParser( time )\n    this.time = Math.min(time, this.totalTime)\n\n    this._updateState()\n    this.emit('seek')\n    return this\n  }\n\n  _updateState(){\n    let state = this.getStateAt( this.time )\n\n    Object.keys( this._meddles ).reduce( (state, name) =>\n      this._assignMeddleState( state, name )\n    , state)\n    // set state\n    this._prevState = this._state\n    this._state = state\n    this.emit('update')\n  }\n\n  _assignMeddleState( state, name ){\n    let meddle = this._meddles[name || DEFAULT_MEDDLE]\n\n    // check meddling\n    if ( !meddle.active ){\n      return state\n    }\n\n    if ( meddle.freeze ){\n      return Object.assign( state, meddle.state )\n    }\n\n    if ( meddle.startTime === false ){\n      meddle.startTime = this.time\n      meddle.endTime = meddle.startTime + meddle.relaxDelay + meddle.relaxDuration\n      meddle.relaxState = util.pick(\n        this.getStateAt( meddle.endTime )\n        , Object.keys(meddle.state)\n      )\n    }\n\n    if ( this.time >= meddle.endTime || this.time < meddle.startTime ){\n      // meddling is over\n      this.unmeddle(name)\n    }\n\n    if ( this.time > this.totalTime ){\n      // this will force a reset when the timeline is re-entered\n      this.unmeddle(name)\n    }\n\n    let timeFraction = getTimeFraction(\n      meddle.startTime + meddle.relaxDelay\n      , meddle.endTime\n      , this.time\n    )\n\n    let meddleTransitionState = getInterpolatedState(\n      this._schema\n      , meddle.state\n      , util.mergeIntersecting( meddle.relaxState, state )\n      , timeFraction\n      , meddle.easing\n    )\n\n    Object.assign( state, meddleTransitionState )\n\n    return state\n  }\n\n  getStateAt( time ){\n    if ( time >= this.totalTime ){\n      let m = this.timeline[this.timeline.length - 1]\n      let t = m.transition\n\n      return { ...m.state, ...t.relaxState }\n    }\n\n    let transitions = getTransitionsAtTime( this.timeline, time )\n    let startState = getStartState( this.timeline, time, this._defaultState )\n\n    return reduceTransitions( this._schema, transitions, time, startState )\n  }\n\n  to( frameId ){\n    let frame = this.getFrame( frameId )\n\n    return this.seek( frame.meta.time )\n  }\n\n  getTransitions( time ){\n    time = time || this.time\n    return getTransitionsAtTime( this.timeline, time )\n  }\n}\n","import { timeParser } from '@/parsers/time'\n\nconst pctReg = /^((\\d{1,3})(\\.\\d*)?)%$/\nconst DEFAULT_FRAME_META = { time: 0 }\nconst META_PARSERS = {\n  time: timeParser\n  , startTime: timeParser\n  , duration( v ){\n    if ( v === undefined ){ return undefined }\n    if ( pctReg.test(v) ){ return v }\n    return timeParser(v)\n  }\n}\n\n// parse meta to standardized format\nfunction parseMeta( meta, defaults ){\n  let ret = { ...defaults, ...meta } // clone\n\n  for ( let key in META_PARSERS ){\n    ret[key] = META_PARSERS[key]( ret[key] )\n  }\n\n  return ret\n}\n\nexport function createFrame( state, meta, defaultMetaOptions ){\n  if ( !state ){\n    throw new Error('Can not create frame without state object')\n  }\n\n  state = { ...state }\n  meta = parseMeta( meta || state.$meta, { ...defaultMetaOptions, ...DEFAULT_FRAME_META } )\n\n  delete state.$meta\n\n  let percentDuration = pctReg.exec(meta.duration)\n\n  if ( percentDuration ){\n    meta.implicit = true\n    meta.fractionalDuration = parseFloat(percentDuration[1]) / 100\n  } else {\n    if ( meta.startTime !== undefined ){\n      meta.duration = meta.time - meta.startTime\n    } else {\n      meta.startTime = meta.time - meta.duration\n    }\n  }\n\n  return {\n    state\n    , meta\n  }\n}\n","import util from '@/util'\nimport { createState } from '@/schema'\nimport { getInterpolatedState, createTransitionFromFrame, getTimeFraction } from '@/transition'\n\n// Check for conflicting overlaps\n// ---------------------------------------\nfunction getConflictingFrames( timeline ){\n  let markers = []\n  let idx\n\n  for ( let l = timeline.length, i = 0; i < l; i++ ){\n    let m = timeline[ i ]\n\n    if ( m.type === 'start' ){\n      markers.push( m )\n    } else {\n      // stop tracking its partner\n      idx = markers.indexOf( m.start )\n      markers.splice( idx, 1 )\n    }\n\n    for ( let l = markers.length, i = 0; i < l; i++ ){\n      let m = markers[ i ]\n\n      for ( let j = i + 1; j < l; j++ ){\n        let paths = util.getIntersectingPaths(\n          m.transition.endState\n          , markers[ j ].transition.endState\n        )\n\n        if ( paths.length ){\n          return {\n            paths\n            , frames: [\n              m.frame\n              , markers[ j ].frame\n            ]\n          }\n        }\n      }\n    }\n  }\n\n  return false\n}\n\nfunction getPrevEndTime( timeline, idx, currTime ){\n  for ( let i = idx - 1; i >= 0; i-- ){\n    let ep = timeline[ i ]\n\n    // loop until previous end marker is found.\n    // if they have the same end time, ignore\n    if ( ep.type === 'end' && currTime !== ep.time ){\n      return ep.time\n    }\n  }\n\n  return 0\n}\n\n// Create a timeline array from specified frames\n// ---------------------------------------\nexport function createTimeline( schema, frames = [] ){\n\n  // timeline is an array of\n  // marker = {\n  //   type: 'start' | 'end'\n  //   , time: Number\n  //   , frame: {...}\n  //   , start|end: <the other transiton>\n  // }\n\n  if ( !frames.length ){ return [] }\n\n  const getTime = v => v.time\n  let defaultState = createState( schema )\n  let timeline = []\n\n  // omit frames that are implicitly defined first\n  let implicitFrames = frames.filter( f => f.meta.implicit ).sort( (a, b) => a.meta.time - b.meta.time )\n\n  frames = frames.filter( f => !f.meta.implicit )\n\n  frames.forEach( frame => {\n    let idx\n    let start = { type: 'start', frame, time: frame.meta.time - frame.meta.duration }\n    let end = { type: 'end', frame, time: frame.meta.time }\n\n    start.end = end\n    end.start = start\n\n    idx = util.sortedIndex( timeline, end, getTime )\n    timeline.splice( idx, 0, end )\n\n    // \"start\"s need to be after \"end\"s of equal time\n    idx = util.sortedIndex( timeline, start, getTime, true )\n    timeline.splice( idx, 0, start )\n  })\n\n  // TODO: is this necessary?\n  // timeline.sort( (a, b) => {\n  //   if ( a.time === b.time ){\n  //     return a.type > b.type ? 1 : -1\n  //   }\n  //\n  //   return 0\n  // })\n\n  // insert frames with implicit timing\n  implicitFrames.forEach( frame => {\n    let end = { type: 'end', frame, time: frame.meta.time }\n    let idx = util.sortedIndex( timeline, end, getTime )\n    let prevEndTime = getPrevEndTime( timeline, idx, end.time )\n    let startTime = util.lerp( end.time, prevEndTime, frame.meta.fractionalDuration )\n    let start = { type: 'start', frame, time: startTime }\n\n    start.end = end\n    end.start = start\n\n    // add the end\n    timeline.splice( idx, 0, end )\n    // \"start\"s need to be after \"end\"s of equal time\n    idx = util.sortedIndex( timeline, start, getTime, true )\n    timeline.splice( idx, 0, start )\n  })\n\n  // assign inherited states\n  let prevState = defaultState\n\n  timeline.forEach( (m, idx) => {\n    // only go through ends\n    if ( m.type !== 'end' ){ return }\n\n    let transition = createTransitionFromFrame( m.start.time, m.time, m.frame, prevState )\n\n    m.transition = transition\n    m.start.transition = transition\n\n    prevState = { ...prevState, ...transition.endState }\n  })\n\n  prevState = defaultState\n\n  // assign a reduced end state to each marker\n  timeline.forEach( m => {\n    if ( m.type !== 'end' ){ return }\n\n    let transitions = getTransitionsAtTime( timeline, m.time )\n\n    prevState = reduceTransitions( schema, transitions, m.time, prevState )\n    m.state = prevState\n  })\n\n  let conflicts = getConflictingFrames( timeline )\n\n  if ( conflicts ){\n    throw new Error('The following overlapping frames modify the same state paths:\\n' +\n      `paths: ${conflicts.paths}\\n` +\n      `frames: ${JSON.stringify(conflicts.frames, null, 2)}`\n    )\n  }\n\n  return timeline\n}\n\n// Get transition information needed\n// at specified time from timeline\n// ---------------------------------------\nexport function getTransitionsAtTime( timeline, time ){\n  let markers = []\n  let idx\n\n  for ( let l = timeline.length, i = 0; i < l; i++ ){\n    let m = timeline[ i ]\n\n    if ( m.time >= time ){\n      break\n    }\n\n    if ( m.type === 'start' ){\n      markers.push( m )\n    } else {\n      // stop tracking its partner\n      idx = markers.indexOf( m.start )\n      markers.splice( idx, 1 )\n    }\n  }\n\n  return markers.map(a => a.transition)\n}\n\n// Get the cached complete state at the\n// last end marker\n// ---------------------------------------\nexport function getStartState( timeline, time, defaultState ){\n  let state = defaultState\n\n  for ( let l = timeline.length, i = 0; i < l; i++ ){\n    let m = timeline[ i ]\n\n    if ( m.time > time ){\n      return state\n    }\n\n    if ( m.type === 'end' ){\n      state = m.state\n    }\n  }\n\n  return state\n}\n\n// Get final state from transitions\n// ---------------------------------------\nexport function reduceTransitions( schema, transitions = [], time = 0, initialState = {} ){\n  return transitions.reduce( (state, tr) => {\n    let progress = getTimeFraction( tr.startTime, tr.endTime, time )\n\n    return Object.assign(\n      state\n      , getInterpolatedState( schema, tr.startState, tr.endState, progress, tr.easing )\n    )\n  }, { ...initialState })\n}\n","// Helper for managing play state\n//\n// ---------------------------------------\n\nimport util from '@/util'\nimport { timeParser } from '@/parsers/time'\nimport EventEmitter from '@/event-emitter'\n\nconst PlayerStack = []\n\nfunction step(){\n  window.requestAnimationFrame( step )\n  let now = util.now()\n\n  for ( let l = PlayerStack.length, i = 0; i < l; i++ ){\n    PlayerStack[ i ].step( now )\n  }\n}\n\nstep()\n\nclass Player extends EventEmitter {\n  constructor( { totalTime = 0, playbackRate = 1, manager } = {} ){\n    super()\n\n    this.totalTime = timeParser( totalTime )\n    this._clockTime = util.now()\n    this._time = 0\n    this.playbackRate = playbackRate\n    this._paused = true\n\n    if ( manager ){\n      this.attach(manager)\n    }\n\n    PlayerStack.push( this )\n  }\n\n  get progress(){\n    return this.totalTime > 0 ? this._time / this.totalTime * 100 : 0\n  }\n\n  set progress(p){\n    this.seek(Math.max(0, p) * this.totalTime / 100)\n  }\n\n  get time(){\n    return this._time\n  }\n\n  set time(t){\n    this.seek(t)\n  }\n\n  get paused(){\n    return this._paused\n  }\n\n  set paused(p){\n    this.togglePause(p)\n  }\n\n  destroy(){\n    this.off(true)\n    let idx = PlayerStack.indexOf(this)\n    PlayerStack.splice(idx, 1)\n    this.emit('destroy')\n  }\n\n  // attach a copilot manager\n  attach( manager ){\n    const updateTime = () => {\n      this.totalTime = manager.totalTime\n    }\n\n    this.on('update', () => {\n      manager.seek(this.time)\n    })\n\n    manager.on('update', updateTime)\n\n    this.on('destroy', () => {\n      manager.off('update', updateTime)\n    })\n\n    updateTime()\n    return this\n  }\n\n  togglePause( paused ){\n    if ( paused === undefined ){\n      paused = !this._paused\n    }\n\n    this._paused = !!paused\n\n    if ( this._paused ){\n      this.emit('pause')\n    } else {\n      this.emit('play')\n    }\n\n    this.emit('togglePause')\n\n    return this\n  }\n\n  pause(){\n    return this.togglePause(true)\n  }\n\n  play(){\n    return this.togglePause(false)\n  }\n\n  // Stops after it reaches time t\n  playTo(time){\n    if (this._time === time){\n      this.seek(time)\n      return this\n    }\n\n    this._playToTime = time\n    this._oldPlaybackRate = this.playbackRate\n    this.playbackRate = (time >= this._time) ? 1 : -1\n    return this.play()\n  }\n\n  seek( time ){\n    this._time = time\n\n    this.emit('update', time)\n    this.emit('seek', time)\n    return this\n  }\n\n  step( now ){\n    let clockTime = this._clockTime\n    let playbackRate = this.playbackRate\n    let dt = now - clockTime\n    let time = this._time\n    let totalTime = this.totalTime\n\n    this._clockTime = now\n\n    this.emit('animate', now)\n\n    // if it's paused, don't step\n    if ( this._paused ){\n      return this\n    }\n\n    time += dt * playbackRate\n\n    // enable stopping at playToTime\n    if (\n      this._playToTime !== false &&\n      (playbackRate * time >= playbackRate * this._playToTime)\n    ){\n      this.togglePause(true)\n      time = this._playToTime\n      this.playbackRate = this._oldPlaybackRate\n      this._playToTime = false\n    }\n\n    if ( playbackRate > 0 && time >= totalTime ){\n      time = totalTime\n      this.togglePause( true )\n      this.emit('end')\n    } else if ( playbackRate < 0 && time <= 0 ){\n      time = 0\n      this.togglePause( true )\n      this.emit('end')\n    }\n\n    this._time = time\n    this.emit('update', time)\n    this.emit('playback', time)\n\n    return this\n  }\n}\n\nexport default function( config ){\n  return new Player( config )\n}\n","import util from '@/util'\n\nexport default function Syncher( {\n  getTime\n  , isPlaying\n  , onFrame\n  , getPlaybackRate = () => 1\n  , threshold = 5000 / 60 // 5 frames\n} = {} ){\n  if ( !getTime ){\n    throw new Error('Must call Syncher with a \"getTime\" function')\n  }\n  if ( !isPlaying ){\n    throw new Error('Must call Syncher with a \"isPlaying\" function')\n  }\n  if ( !onFrame ){\n    throw new Error('Must call Syncher with a \"onFrame\" function')\n  }\n\n  let stop = false\n  let lastClockTime = 0\n  let timeStarted\n  let lastTime = 0\n  const update = () => {\n    if ( stop ){ return }\n    window.requestAnimationFrame( update )\n\n    let now = util.now()\n    let syncTime = getTime() || 0\n    let isPlayingVal = !!isPlaying()\n    let playbackRate = +getPlaybackRate()\n    let time\n\n    if ( !isPlayingVal || !timeStarted ){\n      timeStarted = syncTime\n      time = syncTime\n    } else {\n      // extrapolate\n      let dt = (now - lastClockTime) * playbackRate\n\n      time = lastTime + dt\n\n      if ( Math.abs(time - syncTime) > threshold ){\n        // resync\n        time = syncTime\n        timeStarted = time\n      }\n    }\n\n    lastClockTime = now\n    lastTime = time\n    onFrame( time, now, { syncTime, isPlaying: isPlayingVal, playbackRate } )\n  }\n\n  update()\n\n  function destroy(){\n    stop = true\n  }\n\n  return destroy\n}\n","import * as timeParsers from './time'\n\nexport default {\n  ...timeParsers\n}\n","import util from '@/util'\nimport Easing from 'easing-functions'\nimport { getTimeFraction, getInterpolatedState } from '@/transition'\n\n// Helper to smooth state changes\n// let smooth = Smoothener( frames )\n// smooth.setState( state ) // when state changed\n// state = smooth.update() // when animation frame\n// ---------------------------------------\n\nexport function Smoothener(\n  manager\n  , {\n    duration = 80\n    , keys = null\n    , easing = Easing.Cubic.Out\n  } = {}\n){\n  let state = manager.state\n  let targetState = state\n  let startState = state\n  let startTime = 0\n  let endTime = -1\n  let lastTime\n  let smoothener = {\n    duration\n    , easing\n    , get state(){ return state }\n  }\n\n  smoothener.setState = function( newState ){\n    let now = util.now()\n\n    startTime = lastTime || now\n    endTime = startTime + smoothener.duration\n    targetState = util.pick( newState, keys )\n\n    startState = { ...state }\n  }\n\n  smoothener.update = function(){\n    let now = util.now()\n\n    if ( now > endTime ){\n      lastTime = now\n      state = targetState\n      return state\n    }\n\n    if ( lastTime === now ){\n      return state\n    }\n\n    lastTime = now\n\n    let timeFraction = getTimeFraction(\n      startTime\n      , endTime\n      , now\n    )\n\n    state = getInterpolatedState(\n      manager._schema\n      , startState\n      , targetState\n      , timeFraction\n      , smoothener.easing\n    )\n\n    return state\n  }\n\n  return smoothener\n}\n"],"sourceRoot":""}