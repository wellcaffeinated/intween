{"version":3,"sources":["webpack://Copilot/webpack/universalModuleDefinition","webpack://Copilot/webpack/bootstrap","webpack://Copilot/./node_modules/easing-functions/index.js","webpack://Copilot/./node_modules/process/browser.js","webpack://Copilot/./src/animation/smoothener.js","webpack://Copilot/./src/enum.js","webpack://Copilot/./src/event-emitter.js","webpack://Copilot/./src/frame.js","webpack://Copilot/./src/index.js","webpack://Copilot/./src/interpolators.js","webpack://Copilot/./src/manager.js","webpack://Copilot/./src/parsers/index.js","webpack://Copilot/./src/parsers/time.js","webpack://Copilot/./src/player.js","webpack://Copilot/./src/schema.js","webpack://Copilot/./src/syncher.js","webpack://Copilot/./src/timeline.js","webpack://Copilot/./src/transition.js","webpack://Copilot/./src/type.js","webpack://Copilot/./src/util/index.js"],"names":["Smoothener","manager","duration","keys","easing","Easing","Cubic","Out","state","targetState","startState","startTime","endTime","lastTime","smoothener","setState","newState","now","util","pick","update","timeFraction","_schema","defaultPriority","getPriority","val","_priority_","EventEmitter","_topics","topic","fn","scope","priority","listeners","orig","idx","t","on","bind","_bindfn_","_one_","_scope_","undefined","sortedIndex","splice","listn","off","i","l","length","data","handler","e","one","pctReg","DEFAULT_FRAME_META","time","META_PARSERS","timeParser","v","test","parseMeta","meta","defaults","ret","key","createFrame","defaultMetaOptions","Error","$meta","percentDuration","exec","implicit","fractionalDuration","parseFloat","Copilot","schema","Manager","Util","Interpolators","Player","Syncher","Parsers","registerType","Animation","getTimeFraction","interpolateProperty","Object","assign","ENUM","Pi2","Math","PI","shortestModDist","a0","a1","modulo","moduloBy2","da","cycles","toCharCodes","str","split","map","c","charCodeAt","Linear","from","to","opts","lerp","Angle","Array","v1","mapProperties","String","join","Step","threshold","DEFAULT_OPTIONS","defaultTransitionDuration","meddleTimeout","meddleRelaxDuration","meddleRelaxDelay","DEFAULT_MEDDLE","options","framesById","frames","timeline","_defaultState","_state","_prevState","unmeddle","frame","id","push","refreshTimeline","_updateState","name","meddleState","meddleOpts","relaxDuration","relaxDelay","freeze","meddle","_meddles","relaxState","active","None","toggle","m","forEach","k","min","totalTime","emit","getStateAt","reduce","_assignMeddleState","meddleTransitionState","mergeIntersecting","transition","transitions","frameId","getFrame","seek","toFixed","timeParsers","timeDecReg","timeStdReg","MINUTES","HOURS","getTime","h","s","round","strOrNumber","parsed","match","unit","toLowerCase","PlayerStack","step","window","requestAnimationFrame","playbackRate","clockTime","paused","_clockTime","dt","togglePause","config","DEFAULT_EASING","createSchema","schemaDef","props","prop","def","interpolator","interpolatorOpts","type","cfg","defaultVal","default","createState","isPlaying","onFrame","getPlaybackRate","stop","lastClockTime","timeStarted","syncTime","isPlayingVal","abs","destroy","getConflictingFrames","markers","indexOf","start","j","paths","getIntersectingPaths","endState","getPrevEndTime","ep","createTimeline","defaultState","implicitFrames","filter","f","sort","a","b","end","prevEndTime","prevState","getTransitionsAtTime","reduceTransitions","conflicts","JSON","stringify","getStartState","initialState","tr","progress","createTransitionFromFrame","previousState","getInterpolatedState","nextState","clamp","NATIVE_TYPES","CUSTOM_TYPES","getType","Number","Boolean","isArray","isExplicit","getTypeCfg","identity","process","hrtime","performance","Date","castArray","thing","max","obj","out","first","second","array","value","callback","low","high","mid","o1","o2","prototype","hasOwnProperty"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;AClFA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB,oBAAoB,OAAO;AAC3B;AACA;;AAEA;;AAEA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB,oBAAoB,OAAO;AAC3B;AACA;;AAEA;;AAEA,SAAS;;AAET;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB,oBAAoB,OAAO;AAC3B;AACA;;AAEA;;AAEA,SAAS;;AAET;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB,oBAAoB,OAAO;AAC3B;AACA;;AAEA;AACA;;AAEA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB,oBAAoB,OAAO;AAC3B;AACA;;AAEA;;AAEA,SAAS;;AAET;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB,oBAAoB,OAAO;AAC3B;AACA;;AAEA;;AAEA,SAAS;;AAET;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB,oBAAoB,OAAO;AAC3B;AACA;;AAEA;AACA;;AAEA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB,oBAAoB,OAAO;AAC3B;AACA;;AAEA;;AAEA,SAAS;;AAET;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB,oBAAoB,OAAO;AAC3B;AACA;;AAEA;;AAEA,SAAS;;AAET;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB,oBAAoB,OAAO;AAC3B;AACA;;AAEA;AACA;;AAEA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB,oBAAoB,OAAO;AAC3B;AACA;;AAEA;;AAEA,SAAS;;AAET;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB,oBAAoB,OAAO;AAC3B;AACA;;AAEA;;AAEA,SAAS;;AAET;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB,oBAAoB,OAAO;AAC3B;AACA;;AAEA;AACA;;AAEA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB,oBAAoB,OAAO;AAC3B;AACA;;AAEA;;AAEA,SAAS;;AAET;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB,oBAAoB,OAAO;AAC3B;AACA;;AAEA;;AAEA,SAAS;;AAET;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB,oBAAoB,OAAO;AAC3B;AACA;;AAEA;;AAEA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB,oBAAoB,OAAO;AAC3B;AACA;;AAEA;;AAEA,SAAS;;AAET;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB,oBAAoB,OAAO;AAC3B;AACA;;AAEA;;AAEA,SAAS;;AAET;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB,oBAAoB,OAAO;AAC3B;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB,oBAAoB,OAAO;AAC3B;AACA;;AAEA;;AAEA,SAAS;;AAET;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB,oBAAoB,OAAO;AAC3B;AACA;;AAEA;;AAEA,SAAS;;AAET;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB,oBAAoB,OAAO;AAC3B;AACA;;AAEA;AACA;;AAEA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB,oBAAoB,OAAO;AAC3B;AACA;;AAEA;AACA;AACA;AACA,gCAAgC,OAAO,WAAW;AAClD;AACA;;AAEA,SAAS;;AAET;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB,oBAAoB,OAAO;AAC3B;AACA;;AAEA;AACA;AACA;AACA,gCAAgC,OAAO,WAAW;AAClD;AACA;;AAEA,SAAS;;AAET;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB,oBAAoB,OAAO;AAC3B;AACA;;AAEA;AACA;AACA;AACA,gCAAgC,OAAO,WAAW;AAClD;AACA;AACA;;AAEA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB,oBAAoB,OAAO;AAC3B;AACA;;AAEA;AACA;;AAEA,SAAS;;AAET;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB,oBAAoB,OAAO;AAC3B;AACA;;AAEA;AACA;;AAEA,SAAS;;AAET;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB,oBAAoB,OAAO;AAC3B;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB,oBAAoB,OAAO;AAC3B;AACA;;AAEA;;AAEA,SAAS;;AAET;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB,oBAAoB,OAAO;AAC3B;AACA;;AAEA;;AAEA;;AAEA,aAAa;;AAEb;;AAEA,aAAa;;AAEb;;AAEA,aAAa;;AAEb;;AAEA;;AAEA,SAAS;;AAET;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB,oBAAoB,OAAO;AAC3B;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,E;;;;;;;;;;;AC1iBA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;;AAErC;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA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","file":"copilot.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Copilot\"] = factory();\n\telse\n\t\troot[\"Copilot\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","/**\n* A collection of easing methods defining ease-in ease-out curves.\n*\n* @class Easing\n*/\nvar Easing = module.exports = {\n\n    /**\n    * Linear easing.\n    *\n    * @class Easing.Linear\n    */\n    Linear: {\n\n        /**\n        * Ease-in.\n        *\n        * @method Easing.Linear#In\n        * @param {number} k - The value to be tweened.\n        * @returns {number} k^2.\n        */\n        None: function ( k ) {\n\n            return k;\n\n        }\n\n    },\n\n    /**\n    * Quadratic easing.\n    *\n    * @class Easing.Quadratic\n    */\n    Quadratic: {\n\n        /**\n        * Ease-in.\n        *\n        * @method Easing.Quadratic#In\n        * @param {number} k - The value to be tweened.\n        * @returns {number} k^2.\n        */\n        In: function ( k ) {\n\n            return k * k;\n\n        },\n\n        /**\n        * Ease-out.\n        *\n        * @method Easing.Quadratic#Out\n        * @param {number} k - The value to be tweened.\n        * @returns {number} k* (2-k).\n        */\n        Out: function ( k ) {\n\n            return k * ( 2 - k );\n\n        },\n\n        /**\n        * Ease-in/out.\n        *\n        * @method Easing.Quadratic#InOut\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        InOut: function ( k ) {\n\n            if ( ( k *= 2 ) < 1 ) return 0.5 * k * k;\n            return - 0.5 * ( --k * ( k - 2 ) - 1 );\n\n        }\n\n    },\n\n    /**\n    * Cubic easing.\n    *\n    * @class Easing.Cubic\n    */\n    Cubic: {\n\n        /**\n        * Cubic ease-in.\n        *\n        * @method Easing.Cubic#In\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        In: function ( k ) {\n\n            return k * k * k;\n\n        },\n\n        /**\n        * Cubic ease-out.\n        *\n        * @method Easing.Cubic#Out\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        Out: function ( k ) {\n\n            return --k * k * k + 1;\n\n        },\n\n        /**\n        * Cubic ease-in/out.\n        *\n        * @method Easing.Cubic#InOut\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        InOut: function ( k ) {\n\n            if ( ( k *= 2 ) < 1 ) return 0.5 * k * k * k;\n            return 0.5 * ( ( k -= 2 ) * k * k + 2 );\n\n        }\n\n    },\n\n    /**\n    * Quartic easing.\n    *\n    * @class Easing.Quartic\n    */\n    Quartic: {\n\n        /**\n        * Quartic ease-in.\n        *\n        * @method Easing.Quartic#In\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        In: function ( k ) {\n\n            return k * k * k * k;\n\n        },\n\n        /**\n        * Quartic ease-out.\n        *\n        * @method Easing.Quartic#Out\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        Out: function ( k ) {\n\n            return 1 - ( --k * k * k * k );\n\n        },\n\n        /**\n        * Quartic ease-in/out.\n        *\n        * @method Easing.Quartic#InOut\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        InOut: function ( k ) {\n\n            if ( ( k *= 2 ) < 1) return 0.5 * k * k * k * k;\n            return - 0.5 * ( ( k -= 2 ) * k * k * k - 2 );\n\n        }\n\n    },\n\n    /**\n    * Quintic easing.\n    *\n    * @class Easing.Quintic\n    */\n    Quintic: {\n\n        /**\n        * Quintic ease-in.\n        *\n        * @method Easing.Quintic#In\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        In: function ( k ) {\n\n            return k * k * k * k * k;\n\n        },\n\n        /**\n        * Quintic ease-out.\n        *\n        * @method Easing.Quintic#Out\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        Out: function ( k ) {\n\n            return --k * k * k * k * k + 1;\n\n        },\n\n        /**\n        * Quintic ease-in/out.\n        *\n        * @method Easing.Quintic#InOut\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        InOut: function ( k ) {\n\n            if ( ( k *= 2 ) < 1 ) return 0.5 * k * k * k * k * k;\n            return 0.5 * ( ( k -= 2 ) * k * k * k * k + 2 );\n\n        }\n\n    },\n\n    /**\n    * Sinusoidal easing.\n    *\n    * @class Easing.Sinusoidal\n    */\n    Sinusoidal: {\n\n        /**\n        * Sinusoidal ease-in.\n        *\n        * @method Easing.Sinusoidal#In\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        In: function ( k ) {\n\n            return 1 - Math.cos( k * Math.PI / 2 );\n\n        },\n\n        /**\n        * Sinusoidal ease-out.\n        *\n        * @method Easing.Sinusoidal#Out\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        Out: function ( k ) {\n\n            return Math.sin( k * Math.PI / 2 );\n\n        },\n\n        /**\n        * Sinusoidal ease-in/out.\n        *\n        * @method Easing.Sinusoidal#InOut\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        InOut: function ( k ) {\n\n            return 0.5 * ( 1 - Math.cos( Math.PI * k ) );\n\n        }\n\n    },\n\n    /**\n    * Exponential easing.\n    *\n    * @class Easing.Exponential\n    */\n    Exponential: {\n\n        /**\n        * Exponential ease-in.\n        *\n        * @method Easing.Exponential#In\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        In: function ( k ) {\n\n            return k === 0 ? 0 : Math.pow( 1024, k - 1 );\n\n        },\n\n        /**\n        * Exponential ease-out.\n        *\n        * @method Easing.Exponential#Out\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        Out: function ( k ) {\n\n            return k === 1 ? 1 : 1 - Math.pow( 2, - 10 * k );\n\n        },\n\n        /**\n        * Exponential ease-in/out.\n        *\n        * @method Easing.Exponential#InOut\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        InOut: function ( k ) {\n\n            if ( k === 0 ) return 0;\n            if ( k === 1 ) return 1;\n            if ( ( k *= 2 ) < 1 ) return 0.5 * Math.pow( 1024, k - 1 );\n            return 0.5 * ( - Math.pow( 2, - 10 * ( k - 1 ) ) + 2 );\n\n        }\n\n    },\n\n    /**\n    * Circular easing.\n    *\n    * @class Easing.Circular\n    */\n    Circular: {\n\n        /**\n        * Circular ease-in.\n        *\n        * @method Easing.Circular#In\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        In: function ( k ) {\n\n            return 1 - Math.sqrt( 1 - k * k );\n\n        },\n\n        /**\n        * Circular ease-out.\n        *\n        * @method Easing.Circular#Out\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        Out: function ( k ) {\n\n            return Math.sqrt( 1 - ( --k * k ) );\n\n        },\n\n        /**\n        * Circular ease-in/out.\n        *\n        * @method Easing.Circular#InOut\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        InOut: function ( k ) {\n\n            if ( ( k *= 2 ) < 1) return - 0.5 * ( Math.sqrt( 1 - k * k) - 1);\n            return 0.5 * ( Math.sqrt( 1 - ( k -= 2) * k) + 1);\n\n        }\n\n    },\n\n    /**\n    * Elastic easing.\n    *\n    * @class Easing.Elastic\n    */\n    Elastic: {\n\n        /**\n        * Elastic ease-in.\n        *\n        * @method Easing.Elastic#In\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        In: function ( k ) {\n\n            var s, a = 0.1, p = 0.4;\n            if ( k === 0 ) return 0;\n            if ( k === 1 ) return 1;\n            if ( !a || a < 1 ) { a = 1; s = p / 4; }\n            else s = p * Math.asin( 1 / a ) / ( 2 * Math.PI );\n            return - ( a * Math.pow( 2, 10 * ( k -= 1 ) ) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) );\n\n        },\n\n        /**\n        * Elastic ease-out.\n        *\n        * @method Easing.Elastic#Out\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        Out: function ( k ) {\n\n            var s, a = 0.1, p = 0.4;\n            if ( k === 0 ) return 0;\n            if ( k === 1 ) return 1;\n            if ( !a || a < 1 ) { a = 1; s = p / 4; }\n            else s = p * Math.asin( 1 / a ) / ( 2 * Math.PI );\n            return ( a * Math.pow( 2, - 10 * k) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) + 1 );\n\n        },\n\n        /**\n        * Elastic ease-in/out.\n        *\n        * @method Easing.Elastic#InOut\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        InOut: function ( k ) {\n\n            var s, a = 0.1, p = 0.4;\n            if ( k === 0 ) return 0;\n            if ( k === 1 ) return 1;\n            if ( !a || a < 1 ) { a = 1; s = p / 4; }\n            else s = p * Math.asin( 1 / a ) / ( 2 * Math.PI );\n            if ( ( k *= 2 ) < 1 ) return - 0.5 * ( a * Math.pow( 2, 10 * ( k -= 1 ) ) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) );\n            return a * Math.pow( 2, -10 * ( k -= 1 ) ) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) * 0.5 + 1;\n\n        }\n\n    },\n\n    /**\n    * Back easing.\n    *\n    * @class Easing.Back\n    */\n    Back: {\n\n        /**\n        * Back ease-in.\n        *\n        * @method Easing.Back#In\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        In: function ( k ) {\n\n            var s = 1.70158;\n            return k * k * ( ( s + 1 ) * k - s );\n\n        },\n\n        /**\n        * Back ease-out.\n        *\n        * @method Easing.Back#Out\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        Out: function ( k ) {\n\n            var s = 1.70158;\n            return --k * k * ( ( s + 1 ) * k + s ) + 1;\n\n        },\n\n        /**\n        * Back ease-in/out.\n        *\n        * @method Easing.Back#InOut\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        InOut: function ( k ) {\n\n            var s = 1.70158 * 1.525;\n            if ( ( k *= 2 ) < 1 ) return 0.5 * ( k * k * ( ( s + 1 ) * k - s ) );\n            return 0.5 * ( ( k -= 2 ) * k * ( ( s + 1 ) * k + s ) + 2 );\n\n        }\n\n    },\n\n    /**\n    * Bounce easing.\n    *\n    * @class Easing.Bounce\n    */\n    Bounce: {\n\n        /**\n        * Bounce ease-in.\n        *\n        * @method Easing.Bounce#In\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        In: function ( k ) {\n\n            return 1 - Easing.Bounce.Out( 1 - k );\n\n        },\n\n        /**\n        * Bounce ease-out.\n        *\n        * @method Easing.Bounce#Out\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        Out: function ( k ) {\n\n            if ( k < ( 1 / 2.75 ) ) {\n\n                return 7.5625 * k * k;\n\n            } else if ( k < ( 2 / 2.75 ) ) {\n\n                return 7.5625 * ( k -= ( 1.5 / 2.75 ) ) * k + 0.75;\n\n            } else if ( k < ( 2.5 / 2.75 ) ) {\n\n                return 7.5625 * ( k -= ( 2.25 / 2.75 ) ) * k + 0.9375;\n\n            } else {\n\n                return 7.5625 * ( k -= ( 2.625 / 2.75 ) ) * k + 0.984375;\n\n            }\n\n        },\n\n        /**\n        * Bounce ease-in/out.\n        *\n        * @method Easing.Bounce#InOut\n        * @param {number} k - The value to be tweened.\n        * @returns {number} The tweened value.\n        */\n        InOut: function ( k ) {\n\n            if ( k < 0.5 ) return Easing.Bounce.In( k * 2 ) * 0.5;\n            return Easing.Bounce.Out( k * 2 - 1 ) * 0.5 + 0.5;\n\n        }\n\n    }\n\n};","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","import util from '@/util'\nimport Easing from 'easing-functions'\nimport { getTimeFraction, getInterpolatedState } from '@/transition'\n\n// Helper to smooth state changes\n// let smooth = Smoothener( frames )\n// smooth.setState( state ) // when state changed\n// state = smooth.update() // when animation frame\n// ---------------------------------------\n\nexport function Smoothener(\n  manager\n  , {\n    duration = 80\n    , keys = null\n    , easing = Easing.Cubic.Out\n  } = {}\n){\n  let state = manager.state\n  let targetState = state\n  let startState = state\n  let startTime = 0\n  let endTime = -1\n  let lastTime\n  let smoothener = {\n    duration\n    , easing\n    , get state(){ return state }\n  }\n\n  smoothener.setState = function( newState ){\n    let now = util.now()\n\n    startTime = lastTime || now\n    endTime = startTime + smoothener.duration\n    targetState = util.pick( newState, keys )\n\n    startState = { ...state }\n  }\n\n  smoothener.update = function(){\n    let now = util.now()\n\n    if ( now > endTime ){\n      lastTime = now\n      state = targetState\n      return state\n    }\n\n    if ( lastTime === now ){\n      return state\n    }\n\n    lastTime = now\n\n    let timeFraction = getTimeFraction(\n      startTime\n      , endTime\n      , now\n    )\n\n    state = getInterpolatedState(\n      manager._schema\n      , startState\n      , targetState\n      , timeFraction\n      , smoothener.easing\n    )\n\n    return state\n  }\n\n  return smoothener\n}\n","// enums\n","import util from '@/util'\n\nconst defaultPriority = 1\n\nfunction getPriority( val ){\n  return val._priority_\n}\n\nexport default class EventEmitter {\n  constructor(){\n    // ensure topics hash is initialized\n    this._topics = this._topics || (this._topics = {})\n  }\n  /**\n  * EventEmitter#on( topic, fn( data, event )[, scope, priority] ) -> this\n  * EventEmitter#on( topicConfig[, scope, priority] ) -> this\n  * - topic (String): The topic name\n  * - topicConfig (Object): A config with key/value pairs of `{ topic: callbackFn, ... }`\n  * - fn (Function): The callback function (if not using Object as previous argument)\n  * - data (Mixed): The data sent from the call to `.emit()`\n  * - event (Object): Event data, holding `.topic`, the topic, and `.handler`, the `fn` callback.\n  * - scope (Object): The scope to bind callback to\n  * - priority (Number): The priority of the callback (higher is earlier)\n  *\n  * Subscribe callback(s) to a topic(s).\n  **/\n  on( topic, fn, scope, priority ){\n\n    let listeners\n    let orig\n    let idx\n\n    // check if we're subscribing to multiple topics\n    // with an object\n    if ( typeof topic === 'object' ){\n\n      for ( let t in topic ){\n        this.on( t, topic[ t ], fn, scope )\n      }\n\n      return this\n    }\n\n    listeners = this._topics[ topic ] || (this._topics[ topic ] = [])\n    orig = fn\n\n    if ( typeof scope === 'object' ){\n\n      fn = fn.bind( scope )\n      fn._bindfn_ = orig\n      fn._one_ = orig._one_\n      fn._scope_ = scope\n\n    } else if ( priority === undefined ) {\n\n      priority = scope\n    }\n\n    fn._priority_ = priority === undefined ? defaultPriority : priority\n\n    idx = util.sortedIndex( listeners, fn, getPriority )\n\n    listeners.splice( idx, 0, fn )\n    return this\n  }\n\n  /**\n  * EventEmitter#off( topic, fn[, scope] ) -> this\n  * EventEmitter#off( topicCfg ) -> this\n  * - topic (String): topic The topic name. Specify `true` to remove all listeners for all topics\n  * - topicCfg (Object): A config with key/value pairs of `{ topic: callbackFn, ... }`\n  * - fn (Function): The original callback function. Specify `true` to remove all listeners for specified topic\n  * - scope (Object): The scope the callback was bound to. This is important if you are\n  *   binding methods that come from object prototypes.\n  *\n  * Unsubscribe callback(s) from topic(s).\n  **/\n  off( topic, fn, scope ){\n\n    let listeners\n    let listn\n\n    if ( topic === true ){\n      // purge all listeners\n      this._topics = {}\n      return this\n    }\n\n    // check if we're subscribing to multiple topics\n    // with an object\n    if ( typeof topic === 'object' ){\n\n      for ( let t in topic ){\n\n        this.off( t, topic[ t ] )\n      }\n\n      return this\n    }\n\n    listeners = this._topics[ topic ]\n\n    if (!listeners){\n      return this\n    }\n\n    if ( fn === true ){\n      // purge all listeners for topic\n      this._topics[ topic ] = []\n      return this\n    }\n\n    for ( let i = 0, l = listeners.length; i < l; i++ ){\n\n      listn = listeners[ i ]\n\n      if (\n        (listn._bindfn_ === fn || listn === fn) &&\n        ( (!scope) || listn._scope_ === scope) // check the scope too if specified\n      ){\n        listeners.splice( i, 1 )\n        break\n      }\n    }\n\n    return this\n  }\n\n  /**\n  * EventEmitter#emit( topic[, data] ) -> this\n  * - topic (String): The topic name\n  * - data (Mixed): The data to send\n  *\n  * Publish data to a topic.\n  **/\n  emit( topic, data ){\n\n    let listeners = this._topics[ topic ]\n    let l = listeners && listeners.length\n    let handler\n    let e\n\n    if ( !l ){\n      return this\n    }\n\n    e = {}\n    // event data\n    e.topic = topic\n    e.handler = handler\n\n    // reverse iterate so priorities work out correctly\n    while ( l-- ){\n\n      handler = listeners[ l ]\n      handler( data, e )\n\n      // if _one_ flag is set, the unsubscribe\n      if ( handler._one_ ){\n        listeners.splice( l, 1 )\n      }\n    }\n\n    return this\n  }\n\n  /**\n  * EventEmitter#one( topic, fn( data, event )[, scope, priority] ) -> this\n  * EventEmitter#one( topicConfig[, scope, priority] ) -> this\n  * - topic (String): The topic name\n  * - topicConfig (Object): A config with key/value pairs of `{ topic: callbackFn, ... }`\n  * - fn (Function): The callback function (if not using Object as previous argument)\n  * - data (Mixed): The data sent from the call to `.emit()`\n  * - event (Object): Event data, holding `.topic`, the topic, and `.handler`, the `fn` callback.\n  * - scope (Object): The scope to bind callback to\n  * - priority (Number): The priority of the callback (higher is earlier)\n  *\n  * Subscribe callback(s) to a topic(s), but only ONCE.\n  **/\n  one( topic, fn, scope ){\n\n    // check if we're subscribing to multiple topics\n    // with an object\n    if ( typeof topic === 'object' ){\n\n      for ( let t in topic ){\n\n        this.one( t, topic[ t ], fn, scope )\n      }\n\n      return this\n    }\n\n    // set the _one_ flag\n    fn._one_ = true\n    this.on( topic, fn, scope )\n\n    return this\n  }\n}\n","import { timeParser } from '@/parsers/time'\n\nconst pctReg = /^((\\d{1,3})(\\.\\d*)?)%$/\nconst DEFAULT_FRAME_META = { time: 0 }\nconst META_PARSERS = {\n  time: timeParser\n  , duration( v ){\n    if ( pctReg.test(v) ){ return v }\n    return timeParser(v)\n  }\n}\n\n// parse meta to standardized format\nfunction parseMeta( meta, defaults ){\n  let ret = { ...defaults, ...meta } // clone\n\n  for ( let key in META_PARSERS ){\n    ret[key] = META_PARSERS[key]( ret[key] )\n  }\n\n  return ret\n}\n\nexport function createFrame( state, meta, defaultMetaOptions ){\n  if ( !state ){\n    throw new Error('Can not create frame without state')\n  }\n\n  state = { ...state }\n  meta = parseMeta( meta || state.$meta, { ...defaultMetaOptions, ...DEFAULT_FRAME_META } )\n\n  delete state.$meta\n\n  let percentDuration = pctReg.exec(meta.duration)\n\n  if ( percentDuration ){\n    meta.implicit = true\n    meta.fractionalDuration = parseFloat(percentDuration[1]) / 100\n  } else {\n    if ( !meta.duration ){\n      meta.duration = meta.time - meta.startTime\n    }\n\n    if ( !meta.startTime ){\n      meta.startTime = meta.time - meta.duration\n    }\n  }\n\n  return {\n    state\n    , meta\n  }\n}\n","import Easing from 'easing-functions'\nimport util from '@/util'\nimport Manager from '@/manager'\nimport Interpolators from '@/interpolators'\nimport Player from '@/player'\nimport Syncher from '@/syncher'\nimport Parsers from '@/parsers'\nimport { getTimeFraction, interpolateProperty } from '@/transition'\nimport { Smoothener } from '@/animation/smoothener'\nimport { registerType } from '@/type'\nimport * as ENUM from '@/enum'\n\nconst Copilot = function( schema, meta ){\n  return new Manager( schema, meta )\n}\n\nCopilot.Util = util\nCopilot.Easing = Easing\nCopilot.Interpolators = Interpolators\nCopilot.Player = Player\nCopilot.Syncher = Syncher\nCopilot.Parsers = Parsers\nCopilot.registerType = registerType\nCopilot.Animation = { Smoothener, getTimeFraction, interpolateProperty }\nObject.assign(Copilot, ENUM)\n\nexport default Copilot\n","import util from '@/util'\n\nconst Pi2 = Math.PI * 2\n\nfunction shortestModDist( a0, a1, modulo ) {\n  let moduloBy2 = 0.5 * modulo\n  let da = (a1 - a0) % modulo\n  let cycles = ((a1 - a0) / modulo) | 0\n\n  return (da - moduloBy2) % modulo + moduloBy2 + cycles\n}\n\nfunction toCharCodes( str ){\n  return str.split('').map( c => c.charCodeAt() )\n}\n\nconst Interpolators = {\n  Linear: ( from, to, t, opts = {} ) => opts.modulo ?\n    from + shortestModDist(from, to, opts.modulo) * t :\n    util.lerp( from, to, t )\n  , Angle: ( from, to, t, opts = {} ) => from + shortestModDist(from, to, Pi2) * t\n  , Array: ( from, to, t, opts = {} ) => to.map( (v1, idx) => Interpolators.Linear( from[idx], v1, t ) )\n  , Object: ( from, to, t, opts = {} ) =>\n    util.mapProperties( from, (val, key) =>\n      Interpolators.Linear( val, to[key], t )\n    )\n  , String: ( from, to, t, opts = {} ) => Interpolators.Array( toCharCodes(from), toCharCodes(to), t ).join('')\n  , Step: ( from, to, t, { threshold = 0.5 } = {} ) => (t > threshold) ? to : from\n}\n\nexport default Interpolators\n","import util from '@/util'\nimport Easing from 'easing-functions'\nimport { createSchema, createState } from '@/schema'\nimport { getTimeFraction, getInterpolatedState } from '@/transition'\nimport { createFrame } from '@/frame'\nimport { timeParser } from '@/parsers/time'\nimport {\n  getTransitionsAtTime\n  , createTimeline\n  , reduceTransitions\n  , getStartState\n} from '@/timeline'\nimport EventEmitter from '@/event-emitter'\n\nconst DEFAULT_OPTIONS = {\n  defaultTransitionDuration: 1000\n  , meddleTimeout: 2000\n  , meddleRelaxDuration: 500\n  , meddleRelaxDelay: 1000\n}\n\nconst DEFAULT_MEDDLE = '__DEFAULT__'\n\nexport default class extends EventEmitter {\n  constructor( schema, options ){\n    super()\n\n    this.time = 0\n    this.framesById = {}\n    this.frames = []\n    this.timeline = []\n\n    this._schema = createSchema( schema )\n    this._defaultState = createState( this._schema )\n    this._state = { ...this._defaultState }\n    this._prevState = { ...this._defaultState }\n\n    this.options = Object.assign({}, DEFAULT_OPTIONS, options)\n    // reset\n    this.unmeddle()\n  }\n\n  get state(){\n    return this._state\n  }\n\n  get totalTime(){\n    return this.timeline[this.timeline.length - 1].time\n  }\n\n  get progress(){\n    return (this.time / this.totalTime * 100).toFixed(2)\n  }\n\n  // add a frame\n  add( state, meta ){\n\n    let frame = createFrame(state, meta, {\n      duration: this.options.defaultTransitionDuration\n    })\n\n    if ( frame.meta.id && this.framesById[frame.meta.id] ){\n      throw new Error(`Frame with id \"${frame.meta.id}\" already defined`)\n    }\n\n    // add to id list\n    if ( frame.meta.id ){\n      this.framesById[ frame.meta.id ] = frame\n    }\n\n    this.frames.push( frame )\n    this.refreshTimeline()\n    this._updateState()\n    return this\n  }\n\n  refreshTimeline(){\n    this.timeline = createTimeline( this._schema, this.frames )\n    return this\n  }\n\n  // toggle user meddling\n  meddle( name, meddleState, meddleOpts = {} ){\n    if ( typeof name !== 'string' ){\n      meddleOpts = meddleState\n      meddleState = name\n      name = DEFAULT_MEDDLE\n    }\n\n    let { relaxDuration, relaxDelay, freeze, easing } = meddleOpts\n\n    relaxDelay = relaxDelay !== undefined ? relaxDelay : this.options.meddleRelaxDelay\n    relaxDuration = relaxDuration !== undefined ? relaxDuration : this.options.meddleRelaxDuration\n\n    let meddle = this._meddles[ name ]\n\n    if ( !meddle ){\n      meddle = this._meddles[ name ] = { state: {} }\n    }\n\n    meddle.state = { ...meddle.state, ...meddleState }\n\n    meddle.startTime = false\n    meddle.relaxState = null\n    meddle.active = true\n    meddle.freeze = freeze\n    meddle.relaxDelay = relaxDelay\n    meddle.relaxDuration = relaxDuration\n    meddle.easing = easing || Easing.Linear.None\n\n    this._updateState()\n    return this\n  }\n\n  // force meddling to reset\n  unmeddle( name ){\n    if ( !name ){\n      this._meddles = {}\n      return this\n    }\n\n    delete this._meddles[name]\n\n    return this\n  }\n\n  // toggle freezing of meddle states\n  freeze( toggle = true, name = DEFAULT_MEDDLE ){\n    if ( name === true ){\n      toggle = name\n      name = false\n    }\n\n    if ( name ){\n      let m = this._meddles[ name ]\n\n      if ( m ){\n        m.freeze = toggle\n      }\n\n      return this\n    }\n\n    Object.keys(this._meddles).forEach( k => {\n      let m = this._meddles[ k ]\n\n      m.freeze = toggle\n    })\n\n    return this\n  }\n\n  getFrame( id ){\n    let frame = this.framesById[id]\n\n    if ( !frame ){\n      throw new Error(`No frame with id \"${id}\" exists to be inherited`)\n    }\n\n    return frame\n  }\n\n  seek( time ){\n    time = timeParser( time )\n    this.time = Math.min(time, this.totalTime)\n\n    this._updateState()\n    this.emit('seek')\n    return this\n  }\n\n  _updateState(){\n    let state = this.getStateAt( this.time )\n\n    Object.keys( this._meddles ).reduce( (state, name) =>\n      this._assignMeddleState( state, name )\n    , state)\n    // set state\n    this._prevState = this._state\n    this._state = state\n    this.emit('update')\n  }\n\n  _assignMeddleState( state, name ){\n    let meddle = this._meddles[name || DEFAULT_MEDDLE]\n\n    // check meddling\n    if ( !meddle.active ){\n      return state\n    }\n\n    if ( meddle.freeze ){\n      return Object.assign( state, meddle.state )\n    }\n\n    if ( meddle.startTime === false ){\n      meddle.startTime = this.time\n      meddle.endTime = meddle.startTime + meddle.relaxDelay + meddle.relaxDuration\n      meddle.relaxState = util.pick(\n        this.getStateAt( meddle.endTime )\n        , Object.keys(meddle.state)\n      )\n    }\n\n    if ( this.time >= meddle.endTime || this.time < meddle.startTime ){\n      // meddling is over\n      this.unmeddle(name)\n    }\n\n    if ( this.time > this.totalTime ){\n      // this will force a reset when the timeline is re-entered\n      this.unmeddle(name)\n    }\n\n    let timeFraction = getTimeFraction(\n      meddle.startTime + meddle.relaxDelay\n      , meddle.endTime\n      , this.time\n    )\n\n    let meddleTransitionState = getInterpolatedState(\n      this._schema\n      , meddle.state\n      , util.mergeIntersecting( meddle.relaxState, state )\n      , timeFraction\n      , meddle.easing\n    )\n\n    Object.assign( state, meddleTransitionState )\n\n    return state\n  }\n\n  getStateAt( time ){\n    if ( time >= this.totalTime ){\n      let m = this.timeline[this.timeline.length - 1]\n      let t = m.transition\n\n      return { ...m.state, ...t.relaxState }\n    }\n\n    let transitions = getTransitionsAtTime( this.timeline, time )\n    let startState = getStartState( this.timeline, time, this._defaultState )\n\n    return reduceTransitions( this._schema, transitions, time, startState )\n  }\n\n  to( frameId ){\n    let frame = this.getFrame( frameId )\n\n    return this.seek( frame.meta.time )\n  }\n\n  next(){\n    // transition like slideshow\n  }\n\n  back(){\n    // transition back like slideshow\n  }\n\n  getTransitions( time ){\n    time = time || this.time\n    return getTransitionsAtTime( this.timeline, time )\n  }\n}\n","import * as timeParsers from './time'\n\nexport default {\n  ...timeParsers\n}\n","const timeDecReg = /([0-9.]+)(s|m|h)?/\nconst timeStdReg = /((\\d\\d):)?((\\d\\d):(\\d\\d))/\nconst MINUTES = 60\nconst HOURS = 60 * 60\n\nfunction getTime( h, m, s ){\n  h = parseFloat( h || 0 )\n  m = parseFloat( m || 0 )\n  s = parseFloat( s || 0 )\n  return Math.round( (h * HOURS + m * MINUTES + s) * 1000 ) // integer\n}\n\n// returns parsed time in ms\nexport function timeParser( strOrNumber ){\n  if ( typeof strOrNumber !== 'string' ){\n    return strOrNumber\n  }\n\n  let parsed = strOrNumber.match(timeStdReg)\n\n  if ( parsed ){\n    return getTime( parsed[2], parsed[4], parsed[5] )\n  }\n\n  parsed = strOrNumber.match(timeDecReg)\n\n  if ( parsed ){\n    let unit = ('' + parsed[2]).toLowerCase()\n\n    if ( !parsed[1] || unit === 's' ){\n      return getTime( 0, 0, parsed[1] )\n    }\n\n    if ( unit === 'm' ){\n      return getTime( 0, parsed[1], 0 )\n    }\n\n    if ( unit === 'h' ){\n      return getTime( parsed[1], 0, 0 )\n    }\n  }\n\n  return 0\n}\n","// Helper for managing play state\n//\n// ---------------------------------------\n\nimport util from '@/util'\nimport { timeParser } from '@/parsers/time'\nimport EventEmitter from '@/event-emitter'\n\nconst PlayerStack = []\n\nfunction step(){\n  window.requestAnimationFrame( step )\n  let now = util.now()\n\n  for ( let l = PlayerStack.length, i = 0; i < l; i++ ){\n    PlayerStack[ i ].step( now )\n  }\n}\n\nstep()\n\nclass Player extends EventEmitter {\n  constructor( { totalTime, playbackRate = 1 } = {} ){\n    super()\n\n    if ( !totalTime ){\n      throw new Error('Player: \"totalTime\" not set')\n    }\n\n    this.totalTime = timeParser( totalTime )\n    this.clockTime = util.now()\n    this.time = 0\n    this.playbackRate = playbackRate\n    this.paused = true\n\n    PlayerStack.push( this )\n  }\n\n  get progress(){\n    return (this.time / this.totalTime * 100).toFixed(2)\n  }\n\n  togglePause( paused ){\n    if ( paused === undefined ){\n      paused = !this.paused\n    }\n\n    this.paused = !!paused\n\n    if ( this.paused ){\n      this.emit('pause')\n    } else {\n      this.emit('play')\n    }\n\n    this.emit('togglePause')\n\n    return this\n  }\n\n  seek( time ){\n    this.time = time\n\n    this.emit('update', time)\n    this.emit('seek', time)\n    return this\n  }\n\n  step( now ){\n    let clockTime = this._clockTime\n    let playbackRate = this.playbackRate\n    let dt = now - clockTime\n    let time = this.time\n    let totalTime = this.totalTime\n\n    this._clockTime = now\n\n    this.emit('animate', now)\n\n    // if it's paused, don't step\n    if ( this.paused ){\n      return this\n    }\n\n    time += dt * playbackRate\n\n    if ( time >= totalTime ){\n      time = totalTime\n      this.togglePause( true )\n    }\n\n    this.time = time\n    this.emit('update', time)\n    this.emit('playback', time)\n    return this\n  }\n}\n\nexport default function( config ){\n  return new Player( config )\n}\n","import Easing from 'easing-functions'\nimport { isExplicit, getType, getTypeCfg } from '@/type'\n\nconst DEFAULT_EASING = Easing.Linear.None\n\nexport function createSchema( schemaDef ){\n  let schema = {}\n  let props = Object.keys( schemaDef )\n\n  for ( let prop of props ){\n    let def = schemaDef[ prop ]\n    let easing = DEFAULT_EASING\n    let interpolator = null\n    let interpolatorOpts = def.interpolatorOpts || {}\n    let type\n    let cfg\n    let defaultVal\n\n    if ( typeof def === 'object' && def.type !== undefined ){\n      type = getType( def.type )\n      cfg = getTypeCfg( type )\n      if ( !cfg ){\n        throw new Error(`Unrecognized type ${type}`)\n      }\n\n      if ( isExplicit( type, def.type ) ){\n        defaultVal = def.default || cfg.default\n      } else {\n        defaultVal = def.type\n      }\n\n      easing = def.easing || DEFAULT_EASING\n      interpolator = def.interpolator || cfg.interpolator\n\n    } else {\n      if ( typeof def === 'string' ){\n        type = 'string'\n      } else {\n        type = getType( def )\n      }\n\n      cfg = getTypeCfg( type )\n      if ( !cfg ){\n        throw new Error(`Unrecognized type ${type}`)\n      }\n\n      easing = def.easing || DEFAULT_EASING\n      interpolator = cfg.interpolator\n      defaultVal = isExplicit( type, def ) ? cfg.default : def\n    }\n\n    schema[ prop ] = {\n      type\n      , easing\n      , default: defaultVal\n      , interpolator: interpolator\n      , interpolatorOpts\n      , def\n    }\n  }\n\n  return schema\n}\n\nexport function createState( schema ){\n  let state = {}\n  let props = Object.keys( schema )\n\n  for ( let prop of props ){\n    state[ prop ] = schema[ prop ].default\n  }\n\n  return state\n}\n","import util from '@/util'\n\nexport default function Syncher( {\n  getTime\n  , isPlaying\n  , onFrame\n  , getPlaybackRate = () => 1\n  , threshold = 5000 / 60 // 5 frames\n} = {} ){\n  if ( !getTime ){\n    throw new Error('Must call Syncher with a \"getTime\" function')\n  }\n  if ( !isPlaying ){\n    throw new Error('Must call Syncher with a \"isPlaying\" function')\n  }\n  if ( !onFrame ){\n    throw new Error('Must call Syncher with a \"onFrame\" function')\n  }\n\n  let stop = false\n  let lastClockTime = 0\n  let timeStarted\n  let lastTime = 0\n  const update = () => {\n    if ( stop ){ return }\n    window.requestAnimationFrame( update )\n\n    let now = util.now()\n    let syncTime = getTime() || 0\n    let isPlayingVal = !!isPlaying()\n    let playbackRate = +getPlaybackRate()\n    let time\n\n    if ( !isPlayingVal || !timeStarted ){\n      timeStarted = syncTime\n      time = syncTime\n    } else {\n      // extrapolate\n      let dt = (now - lastClockTime) * playbackRate\n\n      time = lastTime + dt\n\n      if ( Math.abs(time - syncTime) > threshold ){\n        // resync\n        time = syncTime\n        timeStarted = time\n      }\n    }\n\n    lastClockTime = now\n    lastTime = time\n    onFrame( time, now, { syncTime, isPlaying: isPlayingVal, playbackRate } )\n  }\n\n  update()\n\n  function destroy(){\n    stop = true\n  }\n\n  return destroy\n}\n","import util from '@/util'\nimport { createState } from '@/schema'\nimport { getInterpolatedState, createTransitionFromFrame, getTimeFraction } from '@/transition'\n\n// Check for conflicting overlaps\n// ---------------------------------------\nfunction getConflictingFrames( timeline ){\n  let markers = []\n  let idx\n\n  for ( let l = timeline.length, i = 0; i < l; i++ ){\n    let m = timeline[ i ]\n\n    if ( m.type === 'start' ){\n      markers.push( m )\n    } else {\n      // stop tracking its partner\n      idx = markers.indexOf( m.start )\n      markers.splice( idx, 1 )\n    }\n\n    for ( let l = markers.length, i = 0; i < l; i++ ){\n      let m = markers[ i ]\n\n      for ( let j = i + 1; j < l; j++ ){\n        let paths = util.getIntersectingPaths(\n          m.transition.endState\n          , markers[ j ].transition.endState\n        )\n\n        if ( paths.length ){\n          return {\n            paths\n            , frames: [\n              m.frame\n              , markers[ j ].frame\n            ]\n          }\n        }\n      }\n    }\n  }\n\n  return false\n}\n\nfunction getPrevEndTime( timeline, idx ){\n  for ( let i = idx - 1; i >= 0; i-- ){\n    let ep = timeline[ i ]\n\n    if ( ep.type === 'end' ){\n      return ep.time\n    }\n  }\n\n  return 0\n}\n\n// Create a timeline array from specified frames\n// ---------------------------------------\nexport function createTimeline( schema, frames = [] ){\n\n  if ( !frames.length ){ return [] }\n\n  const getTime = v => v.time\n  let defaultState = createState( schema )\n  let timeline = []\n\n  // omit frames that are implicitly defined first\n  let implicitFrames = frames.filter( f => f.meta.implicit ).sort( (a, b) => a.meta.time - b.meta.time )\n\n  frames = frames.filter( f => !f.meta.implicit )\n\n  frames.forEach( frame => {\n    let idx\n    let start = { type: 'start', frame, time: frame.meta.time - frame.meta.duration }\n    let end = { type: 'end', frame, time: frame.meta.time }\n\n    start.end = end\n    end.start = start\n\n    idx = util.sortedIndex( timeline, end, getTime )\n    timeline.splice( idx, 0, end )\n\n    idx = util.sortedIndex( timeline, start, getTime )\n    timeline.splice( idx, 0, start )\n  })\n\n  // TODO: is this necessary?\n  timeline.sort( (a, b) => {\n    if ( a.time === b.time ){\n      return a.type > b.type ? 1 : -1\n    }\n\n    return 0\n  })\n\n  // insert variable frames\n  implicitFrames.forEach( frame => {\n    let end = { type: 'end', frame, time: frame.meta.time }\n    let idx = util.sortedIndex( timeline, end, getTime )\n    let prevEndTime = getPrevEndTime( timeline, idx )\n    let startTime = util.lerp( end.time, prevEndTime, frame.meta.fractionalDuration )\n    let start = { type: 'start', frame, time: startTime }\n\n    start.end = end\n    end.start = start\n\n    // add the end\n    timeline.splice( idx, 0, end )\n    timeline.splice( idx, 0, start )\n  })\n\n  // assign inherited states\n  let prevState = defaultState\n\n  timeline.forEach( (m, idx) => {\n    // only go through ends\n    if ( m.type !== 'end' ){ return }\n\n    let transition = createTransitionFromFrame( m.start.time, m.time, m.frame, prevState )\n\n    m.transition = transition\n    m.start.transition = transition\n\n    prevState = { ...prevState, ...transition.endState }\n  })\n\n  prevState = defaultState\n\n  // assign a reduced end state to each marker\n  timeline.forEach( m => {\n    if ( m.type !== 'end' ){ return }\n\n    let transitions = getTransitionsAtTime( timeline, m.time )\n\n    prevState = reduceTransitions( schema, transitions, m.time, prevState )\n    m.state = prevState\n  })\n\n  let conflicts = getConflictingFrames( timeline )\n\n  if ( conflicts ){\n    throw new Error('The following overlapping frames modify the same state paths:\\n' +\n      `paths: ${conflicts.paths}\\n` +\n      `frames: ${JSON.stringify(conflicts.frames, null, 2)}`\n    )\n  }\n\n  return timeline\n}\n\n// Get transition information needed\n// at specified time from timeline\n// ---------------------------------------\nexport function getTransitionsAtTime( timeline, time ){\n  let markers = []\n  let idx\n\n  for ( let l = timeline.length, i = 0; i < l; i++ ){\n    let m = timeline[ i ]\n\n    if ( m.time >= time ){\n      break\n    }\n\n    if ( m.type === 'start' ){\n      markers.push( m )\n    } else {\n      // stop tracking its partner\n      idx = markers.indexOf( m.start )\n      markers.splice( idx, 1 )\n    }\n  }\n\n  return markers.map(a => a.transition)\n}\n\n// Get the cached complete state at the\n// last end marker\n// ---------------------------------------\nexport function getStartState( timeline, time, defaultState ){\n  let state = defaultState\n\n  for ( let l = timeline.length, i = 0; i < l; i++ ){\n    let m = timeline[ i ]\n\n    if ( m.time > time ){\n      return state\n    }\n\n    if ( m.type === 'end' ){\n      state = m.state\n    }\n  }\n\n  return state\n}\n\n// Get final state from transitions\n// ---------------------------------------\nexport function reduceTransitions( schema, transitions = [], time = 0, initialState = {} ){\n  return transitions.reduce( (state, tr) => {\n    let progress = getTimeFraction( tr.startTime, tr.endTime, time )\n\n    return Object.assign(\n      state\n      , getInterpolatedState( schema, tr.startState, tr.endState, progress, tr.easing )\n    )\n  }, { ...initialState })\n}\n","import util from '@/util'\nimport Easing from 'easing-functions'\n\nexport function createTransitionFromFrame( startTime, endTime, frame, previousState ){\n  let endState = frame.state\n  let startState = util.pick( previousState, Object.keys(endState) )\n  let easing = frame.meta.easing || Easing.Linear.None\n\n  return {\n    startTime\n    , endTime\n    , startState\n    , endState\n    , easing\n    , frame\n  }\n}\n\nexport function interpolateProperty( fn, from, to, progress, opts = {} ){\n  return fn( from, to, progress, opts )\n}\n\nexport function getInterpolatedState( schema, startState, endState, timeFraction, easing ){\n\n  if ( timeFraction <= 0 ){\n    return { ...startState }\n  }\n\n  if ( timeFraction >= 1 ){\n    return { ...endState }\n  }\n\n  let nextState = { ...startState }\n\n  for ( let prop in endState ){\n    let def = schema[prop]\n    let val\n\n    if ( !def ){\n      // not specified in schema. just set\n      val = endState[ prop ]\n    } else {\n\n      let progress = easing( timeFraction )\n\n      val = interpolateProperty(\n        def.interpolator\n        , nextState[ prop ]\n        , endState[ prop ]\n        , progress\n        , def.interpolatorOpts\n      )\n    }\n\n    nextState[ prop ] = val\n  }\n\n  return nextState\n}\n\nexport function getTimeFraction( startTime, endTime, time ){\n  let duration = endTime - startTime\n\n  return util.clamp(0, 1, (time - startTime) / duration)\n}\n","import Interpolators from '@/interpolators'\n\nexport const NATIVE_TYPES = {\n  'number': {\n    type: 'number'\n    , default: 0\n    , interpolator: Interpolators.Linear\n  }\n  , 'string': {\n    type: 'string'\n    , default: ''\n    , interpolator: Interpolators.String\n  }\n  , 'boolean': {\n    type: 'boolean'\n    , default: false\n    , interpolator: Interpolators.Step\n  }\n  , 'array': {\n    type: 'array'\n    , default: []\n    , interpolator: Interpolators.Array\n  }\n  , 'object': {\n    type: 'object'\n    , default: {}\n    , interpolator: Interpolators.Object\n  }\n}\n\nconst CUSTOM_TYPES = {}\n\nexport function registerType( cfg ){\n  let { type, interpolator } = cfg\n\n  if ( !type || !interpolator ){\n    throw new Error('Custom types must have \"type\" and \"interpolator\" specified')\n  }\n\n  if ( CUSTOM_TYPES[type] ){\n    throw new Error(`Custom type \"${type}\" is already registered`)\n  }\n\n  CUSTOM_TYPES[ type ] = {\n    type\n    , interpolator\n    , default: cfg.default\n  }\n}\n\nexport function getType( val ){\n  let type = typeof val\n\n  if ( type === 'string' ){\n    return val\n  }\n\n  if ( val === Number || type === 'number' ){\n    return 'number'\n  }\n\n  if ( val === Boolean || type === 'boolean' ){\n    return 'boolean'\n  }\n\n  if ( val === String ){\n    return 'string'\n  }\n\n  if ( val === Array || Array.isArray( val ) ){\n    return 'array'\n  }\n\n  if ( val === Object ){\n    return 'object'\n  }\n\n  if ( type === 'object' ){\n    throw new Error('Can not use implicit definition for objects or custom types')\n  }\n\n  return type\n}\n\n// determine if the schema declaration is an explicit declaration\n// of the type. eg: (type: 2) is implicit number\nexport function isExplicit( type, val ){\n  if ( type === 'string' ){\n    return val === 'string' || val === String\n  }\n\n  if ( type === 'number' ){\n    return val === 'number' || val === Number\n  }\n\n  if ( type === 'boolean' ){\n    return val === 'boolean' || val === Boolean\n  }\n\n  if ( type === 'array' ){\n    return val === 'array' || val === Array\n  }\n\n  if ( type === 'object' ){\n    return val === 'object' || val === Object\n  }\n\n  return true\n}\n\nexport function getTypeCfg( type ){\n  return NATIVE_TYPES[ type ] || CUSTOM_TYPES[ type ]\n}\n","const util = {}\nconst identity = a => a\n\n// From js - https://github.com/tweenjs/tween.js/blob/master/src/Tween.js\n// Include a performance.now polyfill.\n// In node.js, use process.hrtime.\nif (typeof (window) === 'undefined' && typeof (process) !== 'undefined') {\n  util.now = function now() {\n    var time = process.hrtime()\n\n    // Convert [seconds, nanoseconds] to milliseconds.\n    return time[0] * 1000 + time[1] / 1000000\n  }\n} else if (typeof (window) !== 'undefined' &&\n    window.performance !== undefined &&\n    window.performance.now !== undefined ) {\n  // In a browser, use window.performance.now if it is available.\n  // This must be bound, because directly assigning this function\n  // leads to an invocation exception in Chrome.\n  util.now = window.performance.now.bind(window.performance)\n} else if (Date.now !== undefined) {\n  // Use Date.now if it is available.\n  util.now = Date.now\n} else {\n  // Otherwise, use 'new Date().getTime()'.\n  util.now = function now() {\n    return new Date().getTime()\n  }\n}\n\nutil.castArray = function( thing ){\n  return Array.isArray(thing) ? thing : [thing]\n}\n\nutil.lerp = function( from, to, t ){\n  return from * ( 1 - t ) + to * t\n}\n\n// clamp\nutil.clamp = function( min, max, v ){\n  return Math.min(Math.max(v, min), max)\n}\n\nutil.mapProperties = function( obj, fn ){\n  return Object.keys( obj ).reduce( (ret, val, key) => {\n    ret[key] = fn(val, key)\n    return ret\n  }, {} )\n}\n\nutil.pick = function( obj, keys = [] ){\n  if ( !keys ){\n    // all\n    return { ...obj }\n  }\n  return keys.reduce( (out, k) => {\n    out[k] = obj[k]\n    return out\n  }, {})\n}\n\n// Only take properties that are present in\n// first object\n// ---------------------------------------\nutil.mergeIntersecting = function( first, second ){\n  return {\n    ...first\n    , ...util.pick(\n      second\n      , Object.keys(first)\n    )\n  }\n}\n\n/**\n * util.sortedIndex( array, value[, callback] ) -> Number\n * - array (Array): The array to inspect\n * - value (Mixed): The value to evaluate\n * - callback (Function): Function called per iteration\n *\n * Implementation of [lodash.sortedIndex](http://lodash.com/docs#sortedIndex).\n **/\nutil.sortedIndex = function( array, value, callback ) {\n  let low = 0\n  let high = array ? array.length : low\n\n  // explicitly reference `identity` for better inlining in Firefox\n  callback = callback || identity\n  value = callback(value)\n\n  while (low < high) {\n    let mid\n\n    mid = (low + high) >>> 1\n    if ( callback(array[mid]) < value ){\n      low = mid + 1\n    } else {\n      high = mid\n    }\n  }\n\n  return low\n}\n\nutil.getIntersectingPaths = function ( o1, o2 ){\n  return Object.keys(o1).filter(\n    Object.prototype.hasOwnProperty.bind( o2 )\n  )\n}\n\nexport default util\n"],"sourceRoot":""}