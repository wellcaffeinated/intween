/**
 * InTween 1.0.0-beta
 * @license MIT
 * Copyright 2021-present Jasper Palfree
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).THREE={})}(this,(function(t){"use strict";const e=t=>t,r=Function.prototype.toString.call(Object),n=Object.prototype.toString,i=t=>n.call(t).slice(8,-1),o="undefined"==typeof window&&"undefined"!=typeof process?function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now.bind(window.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()},s=function(t,e,r){return t*(1-r)+e*r},u=function(t,e,r){const n=e-t;return n?(r-t)/n:1},a=function(t,e,r){return Math.min(Math.max(r,t),e)},c=function(t,e,r){return a(0,1,u(t,e,r))},l=t=>{if("function"==typeof t)return t;const e=Array.isArray(t)?[]:{};for(const r in t){const n=t[r],o=i(n);e[r]="Array"===o||"Object"===o?l(n):"Date"===o?new Date(n.getTime()):n}return e},f=t=>null!==t&&"object"==typeof t,h=t=>{if(!f(t))return!1;const e=Object.getPrototypeOf(t);if(null===e)return!0;const n=hasOwnProperty.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Function.prototype.toString.call(n)===r},p=function(t,e){const r={};for(const n in t){const i=t[n];e(i,n)&&(r[n]=i)}return r},m=function(t){return p(t,(t=>void 0!==t))},b=function(t,e){const r={};for(const n in t)r[n]=e(t[n],n);return r},d=function(t,e=[]){if(!e)return{...t};const r={};for(const n of e)r[n]=t[n];return r},y=function(t,r,n,i){let o=0,s=t?t.length:o;for(r=(n=n||e)(r);o<s;){const e=o+s>>>1,u=n(t[e]);(i?u<=r:u<r)?o=e+1:s=e}return o},g=function(t,e){return Object.keys(t).filter(Object.prototype.hasOwnProperty.bind(e))};function v(t,e,r){const n=(e-t)/r,i=Math.floor(n),o=n-i;return(o+(o>.5?-1:o<-.5?1:0)+i)*r}const _=(...t)=>{const e=t.length;if(1===e)return t[0];const r=1/e;return n=>{const i=n*e,o=a(0,e-1,Math.floor(i));return(t[o](i-o)+o)*r}};function w(t){return 0===t.length?e:1===t.length?t[0]:function(e){return t.reduce(((t,e)=>e(t)),e)}}function O(...t){return w(t)}var T="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function S(t,e){return t(e={exports:{}},e.exports),e.exports}var j,I,x=function(t){return t&&t.Math==Math&&t},E=x("object"==typeof globalThis&&globalThis)||x("object"==typeof window&&window)||x("object"==typeof self&&self)||x("object"==typeof T&&T)||function(){return this}()||Function("return this")(),k=E,P=function(t){return Object(function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}(t))},M={}.hasOwnProperty,A=Object.hasOwn||function(t,e){return M.call(P(t),e)},L=function(t){try{return!!t()}catch(t){return!0}},D=!L((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),C=function(t){return"object"==typeof t?null!==t:"function"==typeof t},R=E.document,F=C(R)&&C(R.createElement),q=!D&&!L((function(){return 7!=Object.defineProperty((t="div",F?R.createElement(t):{}),"a",{get:function(){return 7}}).a;var t})),z=function(t){if(!C(t))throw TypeError(String(t)+" is not an object");return t},N=Object.defineProperty,B={f:D?N:function(t,e,r){if(z(t),e=function(t,e){if(!C(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!C(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!C(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!C(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")}(e,!0),z(r),q)try{return N(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},G=D?function(t,e,r){return B.f(t,e,function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}(1,r))}:function(t,e,r){return t[e]=r,t},$="__core-js_shared__",U=E[$]||function(t,e){try{G(E,t,e)}catch(r){E[t]=e}return e}($,{}),V=S((function(t){(t.exports=function(t,e){return U[t]||(U[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.15.2",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})})),H=0,W=Math.random(),Y=function(t){return"function"==typeof t?t:void 0},J=function(t,e){return arguments.length<2?Y(k[t])||Y(E[t]):k[t]&&k[t][e]||E[t]&&E[t][e]}("navigator","userAgent")||"",X=E.process,K=X&&X.versions,Q=K&&K.v8;Q?I=(j=Q.split("."))[0]<4?1:j[0]+j[1]:J&&(!(j=J.match(/Edge\/(\d+)/))||j[1]>=74)&&(j=J.match(/Chrome\/(\d+)/))&&(I=j[1]);var Z=I&&+I,tt=!!Object.getOwnPropertySymbols&&!L((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&Z&&Z<41})),et=tt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,rt=V("wks"),nt=E.Symbol,it=et?nt:nt&&nt.withoutSetter||function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++H+W).toString(36)},ot={f:function(t){return A(rt,t)&&(tt||"string"==typeof rt[t])||(tt&&A(nt,t)?rt[t]=nt[t]:rt[t]=it("Symbol."+t)),rt[t]}},st=B.f;!function(t){var e=k.Symbol||(k.Symbol={});A(e,t)||st(e,t,{value:ot.f(t)})}("observable"),ot.f("observable");var ut,at,ct=function(t){return t&&t.Math==Math&&t},lt=ct("object"==typeof globalThis&&globalThis)||ct("object"==typeof window&&window)||ct("object"==typeof self&&self)||ct("object"==typeof T&&T)||function(){return this}()||Function("return this")(),ft=function(t){try{return!!t()}catch(t){return!0}},ht=!ft((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),pt={}.propertyIsEnumerable,mt=Object.getOwnPropertyDescriptor,bt={f:mt&&!pt.call({1:2},1)?function(t){var e=mt(this,t);return!!e&&e.enumerable}:pt},dt=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},yt={}.toString,gt=function(t){return yt.call(t).slice(8,-1)},vt="".split,_t=ft((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==gt(t)?vt.call(t,""):Object(t)}:Object,wt=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},Ot=function(t){return _t(wt(t))},Tt=function(t){return"object"==typeof t?null!==t:"function"==typeof t},St={},jt=function(t){return"function"==typeof t?t:void 0},It=function(t,e){return arguments.length<2?jt(St[t])||jt(lt[t]):St[t]&&St[t][e]||lt[t]&&lt[t][e]},xt=It("navigator","userAgent")||"",Et=lt.process,kt=lt.Deno,Pt=Et&&Et.versions||kt&&kt.version,Mt=Pt&&Pt.v8;Mt?at=(ut=Mt.split("."))[0]<4?1:ut[0]+ut[1]:xt&&(!(ut=xt.match(/Edge\/(\d+)/))||ut[1]>=74)&&(ut=xt.match(/Chrome\/(\d+)/))&&(at=ut[1]);var At=at&&+at,Lt=!!Object.getOwnPropertySymbols&&!ft((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&At&&At<41})),Dt=Lt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ct=Dt?function(t){return"symbol"==typeof t}:function(t){var e=It("Symbol");return"function"==typeof e&&Object(t)instanceof e},Rt="__core-js_shared__",Ft=lt[Rt]||function(t,e){try{Object.defineProperty(lt,t,{value:e,configurable:!0,writable:!0})}catch(r){lt[t]=e}return e}(Rt,{}),qt=S((function(t){(t.exports=function(t,e){return Ft[t]||(Ft[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.16.0",mode:"pure",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})})),zt=function(t){return Object(wt(t))},Nt={}.hasOwnProperty,Bt=Object.hasOwn||function(t,e){return Nt.call(zt(t),e)},Gt=0,$t=Math.random(),Ut=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++Gt+$t).toString(36)},Vt=qt("wks"),Ht=lt.Symbol,Wt=Dt?Ht:Ht&&Ht.withoutSetter||Ut,Yt=function(t){return Bt(Vt,t)&&(Lt||"string"==typeof Vt[t])||(Lt&&Bt(Ht,t)?Vt[t]=Ht[t]:Vt[t]=Wt("Symbol."+t)),Vt[t]},Jt=Yt("toPrimitive"),Xt=function(t,e){if(!Tt(t)||Ct(t))return t;var r,n=t[Jt];if(void 0!==n){if(void 0===e&&(e="default"),r=n.call(t,e),!Tt(r)||Ct(r))return r;throw TypeError("Can't convert object to primitive value")}return void 0===e&&(e="number"),function(t,e){var r,n;if("string"===e&&"function"==typeof(r=t.toString)&&!Tt(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!Tt(n=r.call(t)))return n;if("string"!==e&&"function"==typeof(r=t.toString)&&!Tt(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")}(t,e)},Kt=function(t){var e=Xt(t,"string");return Ct(e)?e:String(e)},Qt=lt.document,Zt=Tt(Qt)&&Tt(Qt.createElement),te=function(t){return Zt?Qt.createElement(t):{}},ee=!ht&&!ft((function(){return 7!=Object.defineProperty(te("div"),"a",{get:function(){return 7}}).a})),re=Object.getOwnPropertyDescriptor,ne={f:ht?re:function(t,e){if(t=Ot(t),e=Kt(e),ee)try{return re(t,e)}catch(t){}if(Bt(t,e))return dt(!bt.f.call(t,e),t[e])}},ie=/#|\.prototype\./,oe=function(t,e){var r=ue[se(t)];return r==ce||r!=ae&&("function"==typeof e?ft(e):!!e)},se=oe.normalize=function(t){return String(t).replace(ie,".").toLowerCase()},ue=oe.data={},ae=oe.NATIVE="N",ce=oe.POLYFILL="P",le=oe,fe=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},he=function(t,e,r){if(fe(t),void 0===e)return t;switch(r){case 0:return function(){return t.call(e)};case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}},pe=function(t){if(!Tt(t))throw TypeError(String(t)+" is not an object");return t},me=Object.defineProperty,be={f:ht?me:function(t,e,r){if(pe(t),e=Kt(e),pe(r),ee)try{return me(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},de=ht?function(t,e,r){return be.f(t,e,dt(1,r))}:function(t,e,r){return t[e]=r,t},ye=ne.f,ge=function(t){var e=function(e,r,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,n)}return t.apply(this,arguments)};return e.prototype=t.prototype,e},ve=function(t,e){var r,n,i,o,s,u,a,c,l=t.target,f=t.global,h=t.stat,p=t.proto,m=f?lt:h?lt[l]:(lt[l]||{}).prototype,b=f?St:St[l]||(St[l]={}),d=b.prototype;for(i in e)r=!le(f?i:l+(h?".":"#")+i,t.forced)&&m&&Bt(m,i),s=b[i],r&&(u=t.noTargetGet?(c=ye(m,i))&&c.value:m[i]),o=r&&u?u:e[i],r&&typeof s==typeof o||(a=t.bind&&r?he(o,lt):t.wrap&&r?ge(o):p&&"function"==typeof o?he(Function.call,o):o,(t.sham||o&&o.sham||s&&s.sham)&&de(a,"sham",!0),b[i]=a,p&&(Bt(St,n=l+"Prototype")||de(St,n,{}),St[n][i]=o,t.real&&d&&!d[i]&&de(d,i,o)))},_e=Yt("species"),we=function(t,e,r,n){n&&n.enumerable?t[e]=r:de(t,e,r)},Oe=function(t,e,r){for(var n in e)r&&r.unsafe&&t[n]?t[n]=e[n]:we(t,n,e[n],r);return t},Te={};Te[Yt("toStringTag")]="z";var Se="[object z]"===String(Te),je=Yt("toStringTag"),Ie="Arguments"==gt(function(){return arguments}()),xe=Se?gt:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),je))?r:Ie?gt(e):"Object"==(n=gt(e))&&"function"==typeof e.callee?"Arguments":n},Ee={},ke=Yt("iterator"),Pe=function(t){if(null!=t)return t[ke]||t["@@iterator"]||Ee[xe(t)]},Me=Yt("iterator"),Ae=Array.prototype,Le=Math.ceil,De=Math.floor,Ce=function(t){return isNaN(t=+t)?0:(t>0?De:Le)(t)},Re=Math.min,Fe=function(t){return t>0?Re(Ce(t),9007199254740991):0},qe=function(t){var e=t.return;if(void 0!==e)return pe(e.call(t)).value},ze=function(t,e){this.stopped=t,this.result=e},Ne=function(t,e,r){var n,i,o,s,u,a,c,l,f=r&&r.that,h=!(!r||!r.AS_ENTRIES),p=!(!r||!r.IS_ITERATOR),m=!(!r||!r.INTERRUPTED),b=he(e,f,1+h+m),d=function(t){return n&&qe(n),new ze(!0,t)},y=function(t){return h?(pe(t),m?b(t[0],t[1],d):b(t[0],t[1])):m?b(t,d):b(t)};if(p)n=t;else{if("function"!=typeof(i=Pe(t)))throw TypeError("Target is not iterable");if(void 0!==(l=i)&&(Ee.Array===l||Ae[Me]===l)){for(o=0,s=Fe(t.length);s>o;o++)if((u=y(t[o]))&&u instanceof ze)return u;return new ze(!1)}n=i.call(t)}for(a=n.next;!(c=a.call(n)).done;){try{u=y(c.value)}catch(t){throw qe(n),t}if("object"==typeof u&&u&&u instanceof ze)return u}return new ze(!1)},Be=function(t,e){var r=lt.console;r&&r.error&&(1===arguments.length?r.error(t):r.error(t,e))},Ge=Function.toString;"function"!=typeof Ft.inspectSource&&(Ft.inspectSource=function(t){return Ge.call(t)});var $e,Ue,Ve,He=Ft.inspectSource,We=lt.WeakMap,Ye="function"==typeof We&&/native code/.test(He(We)),Je=qt("keys"),Xe=function(t){return Je[t]||(Je[t]=Ut(t))},Ke={},Qe="Object already initialized",Ze=lt.WeakMap;if(Ye||Ft.state){var tr=Ft.state||(Ft.state=new Ze),er=tr.get,rr=tr.has,nr=tr.set;$e=function(t,e){if(rr.call(tr,t))throw new TypeError(Qe);return e.facade=t,nr.call(tr,t,e),e},Ue=function(t){return er.call(tr,t)||{}},Ve=function(t){return rr.call(tr,t)}}else{var ir=Xe("state");Ke[ir]=!0,$e=function(t,e){if(Bt(t,ir))throw new TypeError(Qe);return e.facade=t,de(t,ir,e),e},Ue=function(t){return Bt(t,ir)?t[ir]:{}},Ve=function(t){return Bt(t,ir)}}var or={set:$e,get:Ue,has:Ve,enforce:function(t){return Ve(t)?Ue(t):$e(t,{})},getterFor:function(t){return function(e){var r;if(!Tt(e)||(r=Ue(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return r}}},sr=be.f,ur=Yt("observable"),ar=or.get,cr=or.set,lr=function(t){return null==t?void 0:fe(t)},fr=function(t){var e=t.cleanup;if(e){t.cleanup=void 0;try{e()}catch(t){Be(t)}}},hr=function(t){return void 0===t.observer},pr=function(t){var e=t.facade;if(!ht){e.closed=!0;var r=t.subscriptionObserver;r&&(r.closed=!0)}t.observer=void 0},mr=function(t,e){var r,n=cr(this,{cleanup:void 0,observer:pe(t),subscriptionObserver:void 0});ht||(this.closed=!1);try{(r=lr(t.start))&&r.call(t,this)}catch(t){Be(t)}if(!hr(n)){var i=n.subscriptionObserver=new br(this);try{var o=e(i),s=o;null!=o&&(n.cleanup="function"==typeof o.unsubscribe?function(){s.unsubscribe()}:fe(o))}catch(t){return void i.error(t)}hr(n)&&fr(n)}};mr.prototype=Oe({},{unsubscribe:function(){var t=ar(this);hr(t)||(pr(t),fr(t))}}),ht&&sr(mr.prototype,"closed",{configurable:!0,get:function(){return hr(ar(this))}});var br=function(t){cr(this,{subscription:t}),ht||(this.closed=!1)};br.prototype=Oe({},{next:function(t){var e=ar(ar(this).subscription);if(!hr(e)){var r=e.observer;try{var n=lr(r.next);n&&n.call(r,t)}catch(t){Be(t)}}},error:function(t){var e=ar(ar(this).subscription);if(!hr(e)){var r=e.observer;pr(e);try{var n=lr(r.error);n?n.call(r,t):Be(t)}catch(t){Be(t)}fr(e)}},complete:function(){var t=ar(ar(this).subscription);if(!hr(t)){var e=t.observer;pr(t);try{var r=lr(e.complete);r&&r.call(e)}catch(t){Be(t)}fr(t)}}}),ht&&sr(br.prototype,"closed",{configurable:!0,get:function(){return hr(ar(ar(this).subscription))}});var dr=function(t){!function(t,e,r){if(!(t instanceof e))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation")}(this,dr,"Observable"),cr(this,{subscriber:fe(t)})};Oe(dr.prototype,{subscribe:function(t){var e=arguments.length;return new mr("function"==typeof t?{next:t,error:e>1?arguments[1]:void 0,complete:e>2?arguments[2]:void 0}:Tt(t)?t:{},ar(this).subscriber)}}),Oe(dr,{from:function(t){var e="function"==typeof this?this:dr,r=lr(pe(t)[ur]);if(r){var n=pe(r.call(t));return n.constructor===e?n:new e((function(t){return n.subscribe(t)}))}var i=function(t){var e=Pe(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return pe(e.call(t))}(t);return new e((function(t){Ne(i,(function(e,r){if(t.next(e),t.closed)return r()}),{IS_ITERATOR:!0,INTERRUPTED:!0}),t.complete()}))},of:function(){for(var t="function"==typeof this?this:dr,e=arguments.length,r=new Array(e),n=0;n<e;)r[n]=arguments[n++];return new t((function(t){for(var n=0;n<e;n++)if(t.next(r[n]),t.closed)return;t.complete()}))}}),de(dr.prototype,ur,(function(){return this})),ve({global:!0},{Observable:dr}),function(t){var e=It(t),r=be.f;ht&&e&&!e[_e]&&r(e,_e,{configurable:!0,get:function(){return this}})}("Observable");var yr={f:Yt},gr=be.f;!function(t){var e=St.Symbol||(St.Symbol={});Bt(e,t)||gr(e,t,{value:yr.f(t)})}("observable");var vr,_r,wr,Or=Object.freeze({__proto__:null}),Tr=function(t){if(Ct(t))throw TypeError("Cannot convert a Symbol value to a string");return String(t)},Sr=function(t){return function(e,r){var n,i,o=Tr(wt(e)),s=Ce(r),u=o.length;return s<0||s>=u?t?"":void 0:(n=o.charCodeAt(s))<55296||n>56319||s+1===u||(i=o.charCodeAt(s+1))<56320||i>57343?t?o.charAt(s):n:t?o.slice(s,s+2):i-56320+(n-55296<<10)+65536}},jr={codeAt:Sr(!1),charAt:Sr(!0)},Ir=!ft((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),xr=Xe("IE_PROTO"),Er=Object.prototype,kr=Ir?Object.getPrototypeOf:function(t){return t=zt(t),Bt(t,xr)?t[xr]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Er:null},Pr=Yt("iterator"),Mr=!1;[].keys&&("next"in(wr=[].keys())?(_r=kr(kr(wr)))!==Object.prototype&&(vr=_r):Mr=!0);var Ar=null==vr||ft((function(){var t={};return vr[Pr].call(t)!==t}));Ar&&(vr={}),Ar&&!Bt(vr,Pr)&&de(vr,Pr,(function(){return this}));var Lr,Dr={IteratorPrototype:vr,BUGGY_SAFARI_ITERATORS:Mr},Cr=Math.max,Rr=Math.min,Fr=function(t){return function(e,r,n){var i,o=Ot(e),s=Fe(o.length),u=function(t,e){var r=Ce(t);return r<0?Cr(r+e,0):Rr(r,e)}(n,s);if(t&&r!=r){for(;s>u;)if((i=o[u++])!=i)return!0}else for(;s>u;u++)if((t||u in o)&&o[u]===r)return t||u||0;return!t&&-1}},qr={includes:Fr(!0),indexOf:Fr(!1)}.indexOf,zr=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Nr=Object.keys||function(t){return function(t,e){var r,n=Ot(t),i=0,o=[];for(r in n)!Bt(Ke,r)&&Bt(n,r)&&o.push(r);for(;e.length>i;)Bt(n,r=e[i++])&&(~qr(o,r)||o.push(r));return o}(t,zr)},Br=ht?Object.defineProperties:function(t,e){pe(t);for(var r,n=Nr(e),i=n.length,o=0;i>o;)be.f(t,r=n[o++],e[r]);return t},Gr=It("document","documentElement"),$r=Xe("IE_PROTO"),Ur=function(){},Vr=function(t){return"<script>"+t+"</"+"script>"},Hr=function(t){t.write(Vr("")),t.close();var e=t.parentWindow.Object;return t=null,e},Wr=function(){try{Lr=new ActiveXObject("htmlfile")}catch(t){}Wr=document.domain&&Lr?Hr(Lr):function(){var t,e=te("iframe");if(e.style)return e.style.display="none",Gr.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Vr("document.F=Object")),t.close(),t.F}()||Hr(Lr);for(var t=zr.length;t--;)delete Wr.prototype[zr[t]];return Wr()};Ke[$r]=!0;var Yr=Object.create||function(t,e){var r;return null!==t?(Ur.prototype=pe(t),r=new Ur,Ur.prototype=null,r[$r]=t):r=Wr(),void 0===e?r:Br(r,e)},Jr=Se?{}.toString:function(){return"[object "+xe(this)+"]"},Xr=be.f,Kr=Yt("toStringTag"),Qr=function(t,e,r,n){if(t){var i=r?t:t.prototype;Bt(i,Kr)||Xr(i,Kr,{configurable:!0,value:e}),n&&!Se&&de(i,"toString",Jr)}},Zr=Dr.IteratorPrototype,tn=function(){return this};Object.setPrototypeOf||"__proto__"in{}&&function(){var t,e=!1,r={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),e=r instanceof Array}catch(t){}}();var en=Dr.IteratorPrototype,rn=Dr.BUGGY_SAFARI_ITERATORS,nn=Yt("iterator"),on="keys",sn="values",un="entries",an=function(){return this},cn=function(t,e,r,n,i,o,s){!function(t,e,r){var n=e+" Iterator";t.prototype=Yr(Zr,{next:dt(1,r)}),Qr(t,n,!1,!0),Ee[n]=tn}(r,e,n);var u,a,c,l=function(t){if(t===i&&b)return b;if(!rn&&t in p)return p[t];switch(t){case on:case sn:case un:return function(){return new r(this,t)}}return function(){return new r(this)}},f=e+" Iterator",h=!1,p=t.prototype,m=p[nn]||p["@@iterator"]||i&&p[i],b=!rn&&m||l(i),d="Array"==e&&p.entries||m;if(d&&(u=kr(d.call(new t)),en!==Object.prototype&&u.next&&(Qr(u,f,!0,!0),Ee[f]=an)),i==sn&&m&&m.name!==sn&&(h=!0,b=function(){return m.call(this)}),s&&p[nn]!==b&&de(p,nn,b),Ee[e]=b,i)if(a={values:l(sn),keys:o?b:l(on),entries:l(un)},s)for(c in a)(rn||h||!(c in p))&&we(p,c,a[c]);else ve({target:e,proto:!0,forced:rn||h},a);return a},ln=jr.charAt,fn="String Iterator",hn=or.set,pn=or.getterFor(fn);cn(String,"String",(function(t){hn(this,{type:fn,string:Tr(t),index:0})}),(function(){var t,e=pn(this),r=e.string,n=e.index;return n>=r.length?{value:void 0,done:!0}:(t=ln(r,n),e.index+=t.length,{value:t,done:!1})}));var mn="Array Iterator",bn=or.set,dn=or.getterFor(mn);cn(Array,"Array",(function(t,e){bn(this,{type:mn,target:Ot(t),index:0,kind:e})}),(function(){var t=dn(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}}),"values"),Ee.Arguments=Ee.Array;var yn,gn=Yt("toStringTag");for(var vn in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var _n=lt[vn],wn=_n&&_n.prototype;wn&&xe(wn)!==gn&&de(wn,gn,vn),Ee[vn]=Ee.Array}(yn=Or)&&yn.default;var On=St.Observable;class Tn extends On{constructor(t){super(t||e)}pipe(...t){return w(t)(this)}lift(t){return new Tn((e=>t.call(e,this)))}"@@observable"(){return this}}class Sn extends Tn{constructor(...t){super(...t),this.closed=!1,this.observers=[]}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}next(t){if(this._throwIfClosed(),!this.isStopped){const e=this.observers.slice();for(const r of e)r.next(t)}}error(t){if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:e}=this;for(;e.length;)e.shift().error(t)}}complete(){if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}}subscribe(t){const e=this.observers.push(t);return{unsubscribe:()=>{this.observers.splice(e-1,1)}}}_throwIfClosed(){if(this.closed)throw new Error("Subscription closed!")}}const jn=t=>e=>new Tn((r=>e.subscribe({next(e){try{e=t(e),r.next(e)}catch(t){r.error(t)}},error(t){r.error(t)},complete(){r.complete()}})));function In(...t){return new Tn((e=>{if(0===t.length)return Tn.from([]);let r=t.length;const n=t.map((t=>Tn.from(t).subscribe({next(t){e.next(t)},error(t){e.error(t)},complete(){0==--r&&e.complete()}})));return()=>n.forEach((t=>t.unsubscribe()))}))}function xn(...t){return new Tn((e=>{if(0===t.length)return Tn.from([]);let r=t.length,n=new Set,i=!1;const o=t.map((()=>{})),s=t.map(((s,u)=>Tn.from(s).subscribe({next(r){if(o[u]=r,!i){if(n.add(u),n.size!==t.length)return;n=null,i=!0}e.next(Array.from(o))},error(t){e.error(t)},complete(){0==--r&&e.complete()}})));return()=>s.forEach((t=>t.unsubscribe()))}))}const En=(...t)=>e=>new Tn((r=>{const n=new Sn,i=xn(...t.map((t=>t(n)))).subscribe(r),o=e.subscribe(n);return()=>{i.unsubscribe(),o.unsubscribe()}}));class kn extends Function{constructor(){return super("...args","return this._bound.__call__(...args)"),this._bound=this.bind(this),this._bound}__call__(){}}function Pn(t){return t._priority_}class Mn extends Tn{constructor(t){super(t),this._topics=this._topics||(this._topics={})}fromEvent(t,e){return new Tn((r=>{const n=t=>r.next(t);return this.on(t,n,e),()=>{this.off(t,n)}}))}on(t,e,r,n){if("object"==typeof t){for(const n in t)this.on(n,t[n],e,r);return this}const i=this._topics[t]||(this._topics[t]=[]),o=e;"object"==typeof r?((e=e.bind(r))._bindfn_=o,e._one_=o._one_,e._scope_=r):void 0===n&&(n=r),e._priority_=void 0===n?1:n;const s=y(i,e,Pn);return i.splice(s,0,e),this}off(t,e,r){if(!0===t)return this._topics={},this;if("object"==typeof t){for(const e in t)this.off(e,t[e]);return this}const n=this._topics[t];if(!n)return this;if(!0===e)return this._topics[t]=[],this;for(let t=0,i=n.length;t<i;t++){const i=n[t];if(!(i._bindfn_!==e&&i!==e||r&&i._scope_!==r)){n.splice(t,1);break}}return this}emit(t,e){const r=this._topics[t];let n=r&&r.length;if(!n)return this;const i={};for(i.topic=t;n--;){const t=r[n];t(e,i),t._one_&&r.splice(n,1)}return this}one(t,e,r){if("object"==typeof t){for(const n in t)this.one(n,t[n],e,r);return this}return e._one_=!0,this.on(t,e,r),this}}var An=Object.freeze({__proto__:null,Callable:kn,Emitter:Mn,identity:e,typeName:i,now:o,castArray:function(t){return Array.isArray(t)?t:[t]},lerp:s,invLerp:u,clamp:a,lerpClamped:function(t,e,r){return s(t,e,a(0,1,r))},invLerpClamped:c,cloneDeep:l,isObjectLike:f,isPlainObject:h,filterObjectValues:p,sanitizedObject:m,mapProperties:b,pick:d,mergeIntersecting:function(t,e){return{...t,...d(e,Object.keys(t))}},sortedIndex:y,getIntersectingPaths:g,pull:function(t,e){const r=t.indexOf(e);return t.splice(r,1),t},shortestModDist:v,combineEasing:_});const Ln=2*Math.PI,Dn=(t=.1,e=.1)=>{let r=e/4;t<1?t=1:r=e*Math.asin(1/t)/Ln;const n=Ln/e;return e=>0===e?0:1===e?1:-t*Math.pow(2,10*(e-=1))*Math.sin((e-r)*n)},Cn=(t=.1,e=.1)=>{let r=e/4;t<1?t=1:r=e*Math.asin(1/t)/Ln;const n=Ln/e;return e=>0===e?0:1===e?1:t*Math.pow(2,-10*e)*Math.sin((e-r)*n)+1},Rn=(t=.1,e=.1)=>{let r=e/4;t<1?t=1:r=e*Math.asin(1/t)/Ln;const n=Ln/e;return e=>0===e?0:1===e?1:(e*=2)<1?t*Math.pow(2,10*(e-=1))*Math.sin((e-r)*n)*-.5:t*Math.pow(2,-10*(e-=1))*Math.sin((e-r)*n)*.5+1},Fn=(t=1.70158)=>e=>e*e*((t+1)*e-t),qn=(t=1.70158)=>e=>--e*e*((t+1)*e+t)+1,zn=(t=1.70158)=>e=>{const r=1.525*t;return(e*=2)<1?e*e*((r+1)*e-r)*.5:.5*((e-=2)*e*((r+1)*e+r)+2)},Nn=(t=1)=>e=>1/t*(1+(t*e|0)),Bn=Math.PI/2,Gn=t=>t,$n=t=>t*t,Un=t=>t*(2-t),Vn=t=>(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1),Hn=t=>t*t*t,Wn=t=>--t*t*t+1,Yn=t=>(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2),Jn=t=>t*t*t*t,Xn=t=>1- --t*t*t*t,Kn=t=>(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),Qn=t=>t*t*t*t*t,Zn=t=>--t*t*t*t*t+1,ti=t=>(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),ei=t=>1-Math.cos(t*Bn),ri=t=>Math.sin(t*Bn),ni=t=>.5*(1-Math.cos(Math.PI*t)),ii=t=>0===t?0:Math.pow(1024,t-1),oi=t=>0===t?0:1-Math.pow(1024,-t),si=t=>0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(1024,1-t)),ui=Dn(),ai=Cn(),ci=Rn(),li=t=>1-Math.sqrt(1-t*t),fi=t=>Math.sqrt(1- --t*t),hi=t=>(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),pi=t=>(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375),mi=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,bi=t=>{let e=!1;return t<.5?(t=1-2*t,e=!0):t=2*t-1,t<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5},di=Fn(),yi=qn(),gi=zn(),vi=Nn();var _i=Object.freeze({__proto__:null,linear:Gn,quadIn:$n,quadOut:Un,quadInOut:Vn,cubicIn:Hn,cubicOut:Wn,cubicInOut:Yn,quartIn:Jn,quartOut:Xn,quartInOut:Kn,quintIn:Qn,quintOut:Zn,quintInOut:ti,sinIn:ei,sinOut:ri,sinInOut:ni,expIn:ii,expOut:oi,expInOut:si,elasticIn:ui,elasticOut:ai,elasticInOut:ci,circularIn:li,circularOut:fi,circularInOut:hi,bounceIn:pi,bounceOut:mi,bounceInOut:bi,backIn:di,backOut:yi,backInOut:gi,step:vi}),wi=Object.freeze({__proto__:null,makeElasticIn:Dn,makeElasticOut:Cn,makeElasticInOut:Rn,makeBackIn:Fn,makeBackOut:qn,makeBackInOut:zn,makeSteps:Nn,linear:Gn,quadIn:$n,quadOut:Un,quadInOut:Vn,cubicIn:Hn,cubicOut:Wn,cubicInOut:Yn,quartIn:Jn,quartOut:Xn,quartInOut:Kn,quintIn:Qn,quintOut:Zn,quintInOut:ti,sinIn:ei,sinOut:ri,sinInOut:ni,expIn:ii,expOut:oi,expInOut:si,elasticIn:ui,elasticOut:ai,elasticInOut:ci,circularIn:li,circularOut:fi,circularInOut:hi,bounceIn:pi,bounceOut:mi,bounceInOut:bi,backIn:di,backOut:yi,backInOut:gi,step:vi});const Oi=t=>(e,r,n)=>n>=t?r:e,Ti=t=>(e,r,n)=>r.map(((r,i)=>t(e[i],r,n))),Si=2*Math.PI,ji=(t,e,r)=>s(t,e,r),Ii=(t,e,r)=>t+v(t,e,Si)*r,xi=(t,e,r)=>t+v(t,e,360)*r,Ei=Ti(s),ki=(t,e,r)=>b(t,((t,n)=>s(t,e[n],r))),Pi=(t,e,r)=>{if(r<=0)return t;const n=0|s(0,e.length,r);return e.substr(0,n)},Mi=Oi(1);var Ai=Object.freeze({__proto__:null,linear:ji,radians:Ii,degrees:xi,array:Ei,object:ki,string:Pi,toggle:Mi}),Li=Object.freeze({__proto__:null,makeToggle:Oi,makeCyclic:t=>(e,r,n)=>e+v(e,r,t)*n,makeForArray:Ti,linear:ji,radians:Ii,degrees:xi,array:Ei,object:ki,string:Pi,toggle:Mi});function Di(t){if(null!=t){if("string"==typeof t){const e=t.replace(" ","").split("+");if(1!==e.length)return _(...e.map(Di));if((t=e[0])in _i)return _i[t]}else if(t instanceof Function)return t;throw new Error(`Unrecognized easing name "${t}"`)}}function Ci(t){if(null==t)return!1;if(t instanceof Function)return t;if("string"==typeof t&&t in Ai)return Ai[t];throw new Error(`Unrecognized interpolator name "${t}"`)}const Ri={number:{type:"number",default:0,interpolator:ji},string:{type:"string",default:"",interpolator:Pi},boolean:{type:"boolean",default:!1,interpolator:Mi},array:{type:"array",default:[],interpolator:Ei},object:{type:"object",default:{},interpolator:ki}},Fi={};function qi(t){if(null===t)throw new Error("Can not determine type of null value");const e=typeof t;if("string"===e)return t in Fi?t:"string";if("number"===e)return"number";if("boolean"===e)return"boolean";if(Array.isArray(t))return"array";const r=function(t){return Object.values(Fi).find((({constructor:e})=>t instanceof e))}(t);return r?r.type:"object"===e?"object":e}function zi(t){if(null===t)throw new Error("Can not determine type of null value");if("string"==typeof t)return t;if(t===Number||"number"===t)return"number";if(t===Boolean||"boolean"===t)return"boolean";if(t===String)return"string";if(t===Array)return"array";const e=(r=t,Object.values(Fi).find((({constructor:t})=>r===t)));var r;return e?e.type:t===Object||"object"===t?"object":t}function Ni(t){const e=Ri[t]||Fi[t];if(!e)throw new Error(`Unrecognized type ${t}`);return e}const Bi=["value",...Object.keys(Ni("object"))],Gi="linear";function $i(t,e,r){if("array"===t&&r&&r.length){const t=Ui(r[0]);return Ti(t.interpolator)}return Ci(e.interpolator)}function Ui(t){let e,r,n,i,o;return!h(t)||void 0===t.value&&void 0===t.type?(n=qi(t),i=Ni(n),e=Di(t.easing||Gi),o=t,r=$i(n,i,o)):(!function(t){if(Object.keys(t).filter((t=>Bi.indexOf(t)<0)).length)throw new Error('Type definition contains extra keys. Does your definition use "type" as a property name?')}(t),n=zi(t.type)||qi(t.value),i=Ni(n),o=t.value||i.default,e=Di(t.easing||Gi),r=Ci(t.interpolator)||$i(n,i,o)),{type:n,easing:e,default:o,interpolator:r,def:t}}function Vi(t){return b(t,Ui)}function Hi(t){const e={},r=Object.keys(t);for(const n of r)e[n]=t[n].default;return e}const Wi=/([0-9.]+)(s|m|h)?/,Yi=/((\d\d):)?((\d\d):(\d\d))/;function Ji(t,e,r){return t=parseFloat(t||0),e=parseFloat(e||0),r=parseFloat(r||0),Math.round(1e3*(3600*t+60*e+r))}function Xi(t){if("string"!=typeof t)return t;let e=t.match(Yi);if(e)return Ji(e[2],e[4],e[5]);if(e=t.match(Wi),e){const t=(""+e[2]).toLowerCase();if(!e[1]||"s"===t)return Ji(0,0,e[1]);if("m"===t)return Ji(0,e[1],0);if("h"===t)return Ji(e[1],0,0)}return 0}const Ki=/^((\d{1,3})(\.\d*)?)%$/,Qi={endTime(t){if(void 0!==t)return Xi(t)},startTime:Xi,duration(t){if(void 0!==t)return Ki.test(t)?t:Xi(t)},easing:Di};function Zi(t,e,r){if(!t)throw new Error("Can not create frame without state object");if("object"!=typeof t)throw new Error("States must be plain objects");t=l(t),e=function(t,e){const r={...e,...m(t)};for(const t in Qi)r[t]=Qi[t](r[t]);return r}(e||t.$meta,r),delete t.$meta;const n=Ki.exec(e.duration);return n?(e.implicit=!0,e.fractionalDuration=parseFloat(n[1])/100):void 0!==e.endTime?void 0!==e.startTime?e.duration=e.endTime-e.startTime:e.startTime=e.endTime-e.duration:e.endTime=e.startTime+e.duration,{state:t,meta:e}}function to(t,e,r,n){return t(e,r,n)}function eo(t,e,r,n,i){if(n<=0)return l(e);if(n>=1)return l(r);const o=l(e);for(const s in r){const u=t[s];let a;if(u){const t=(i=i||u.easing)(n);a=to(u.interpolator,e[s],r[s],t)}else a=r[s];o[s]=a}return o}function ro(t,e=[]){if(!e.length)return[];const r=t=>t.time,n=Hi(t),i=[],o=e.filter((t=>t.meta.implicit)).sort(((t,e)=>t.meta.endTime-e.meta.endTime));(e=e.filter((t=>!t.meta.implicit))).forEach((t=>{let e;const n={type:"start",frame:t,time:t.meta.endTime-t.meta.duration},o={type:"end",frame:t,time:t.meta.endTime};n.end=o,o.start=n,e=y(i,o,r),i.splice(e,0,o),e=Math.min(e,y(i,n,r,!0)),i.splice(e,0,n)})),o.forEach((t=>{const e={type:"end",frame:t,time:t.meta.endTime};let n=y(i,e,r);const o=function(t,e,r){for(let n=e-1;n>=0;n--){const e=t[n];if("end"===e.type&&r!==e.time)return e.time}return 0}(i,n,e.time),u={type:"start",frame:t,time:s(e.time,o,t.meta.fractionalDuration)};u.end=e,e.start=u,i.splice(n,0,e),n=Math.min(n,y(i,u,r,!0)),i.splice(n,0,u)}));let u=n;i.forEach(((t,e)=>{if("end"!==t.type)return;const r=function(t,e,r,n){const i=r.state;return{startTime:t,endTime:e,startState:d(n,Object.keys(i)),endState:i,easing:r.meta.easing,frame:r}}(t.start.time,t.time,t.frame,u);t.transition=r,t.start.transition=r,u={...u,...r.endState}})),u=n,i.forEach((e=>{if("end"!==e.type)return;const r=no(i,e.time);u=io(t,r,e.time,u),e.state=u}));const a=function(t){const e=[];let r;for(let n=t.length,i=0;i<n;i++){const n=t[i];"start"===n.type?e.push(n):(r=e.indexOf(n.start),e.splice(r,1));for(let t=e.length,r=0;r<t;r++){const n=e[r];for(let i=r+1;i<t;i++){const t=g(n.transition.endState,e[i].transition.endState);if(t.length)return{paths:t,frames:[n.frame,e[i].frame]}}}}return!1}(i);if(a)throw new Error(`The following overlapping frames modify the same state paths:\npaths: ${a.paths}\nframes: ${JSON.stringify(a.frames,null,2)}`);return i}function no(t,e){const r=[];let n;for(let i=t.length,o=0;o<i;o++){const i=t[o];if(i.time>e)break;"start"===i.type?r.push(i):i.time!==e&&(n=r.indexOf(i.start),r.splice(n,1))}return r.map((t=>t.transition))}function io(t,e=[],r=0,n={}){return e.reduce(((e,n)=>{const i=c(n.startTime,n.endTime,r);return Object.assign(e,eo(t,n.startState,n.endState,i,n.easing))}),l(n))}class oo extends kn{at(t){return t}__call__(t){return jn((t=>this.at(t)))(t)}}const so={tweenDuration:"100%",easing:"linear"};class uo extends oo{static create(t,e){return new uo(t,e)}constructor(t,e){super(),this.framesById={},this.frames=[],this.timeline=[],this._schema=Vi(t),this._startingState=Hi(this._schema),this._timeLabel=!1,this._loop=!1,this.options=Object.assign({},so,e),this._refreshTimeline()}get duration(){return this.timeline[this.timeline.length-1]?.time||0}withTime(t="time"){return this._timeLabel=t||!1,this}by(t,e,r,n){const i={endTime:t};return"object"==typeof e?(n=r,r=e):i.duration=e,n&&(i.easing=n),this.to(r,i)}in(t,e,r,n){const i={endTime:this.duration+Xi(t)};return"object"==typeof e?(n=r,r=e):i.duration=e,n&&(i.easing=n),this.to(r,i)}to(t,e){const r={};"string"==typeof e?r.easing=e:e&&Object.assign(r,e),void 0===r.startTime&&void 0===r.endTime&&(r.startTime=this.duration);const n=Zi(t,r,{duration:this.options.tweenDuration});if(n.meta.id&&this.framesById[n.meta.id])throw new Error(`Frame with id "${n.meta.id}" already defined`);return n.meta.id&&(this.framesById[n.meta.id]=n),this.frames.push(n),this._refreshTimeline(),this}loop(t=!0){return this._loop=t,this}_refreshTimeline(){return this.timeline=ro(this._schema,this.frames),this}getFrame(t){return this.framesById[t]}at(t){let e;if(this._loop&&(t%=this.duration),t>=this.duration){const t=this.timeline[this.timeline.length-1];e=l(t.state)}else{const r=no(this.timeline,t),n=function(t,e,r){let n=r;for(let r=t.length,i=0;i<r;i++){const r=t[i];if(r.time>e)return n;"end"===r.type&&(n=r.state)}return n}(this.timeline,t,this._startingState);e=io(this._schema,r,t,n)}if(this._timeLabel){if(void 0!==e[this._timeLabel])throw new Error(`State already has a property that would be overriden by time variable "${this._timeLabel}"`);e[this._timeLabel]=t}return e}getTransitions(t){return t=t||this.time,no(this.timeline,t)}}const ao={relaxDuration:500,relaxDelay:1e3,easing:"linear"};class co extends oo{static create(t,e){return new co(t,e)}constructor(t,e){super(),this._subject=new Sn,this._tween=t,this.options=e,this.lastTime=0,this.defaults(),this.clear()}get options(){return this._options}set options(t){this._options=Object.assign({},ao,t),this.defaults()}freeze(t=!0){return this.frozen=t,this}relaxDelay(t){return this._relaxDelay=Xi(void 0===t?this.options.relaxDelay:t),this}relaxDuration(t){return this._relaxDuration=Xi(void 0===t?this.options.relaxDuration:t),this}easing(t){return this._easing=Di(void 0===t?this.options.easing:t),this}defaults(){return this.relaxDelay(),this.relaxDuration(),this.easing(),this}set(t){return this.state={...this.state,...t},this.started=!1,this.startTime=!1,this.relaxState=null,this.active=!0,this._subject.next(this.lastTime),this}clear(){return this.state={},this.started=!1,this.active=!1,this.frozen=!1,this.startTime=!1,this.lastTime=0,this}at(t){if(this.lastTime=t,!this.active||this.frozen)return Object.assign({},this.state);if(this.started||(this.startTime=t,this.started=!0,this.endTime=this.startTime+this._relaxDelay+this._relaxDuration,this.relaxState=d(this._tween.at(this.endTime),Object.keys(this.state))),this.startTime===t)return Object.assign({},this.state);(t>=this.endTime||t<this.startTime)&&this.clear(),t>this.totalTime&&this.clear();const e=c(this.startTime+this._relaxDelay,this.endTime,t);return eo(this._tween._schema,this.state,this.relaxState,e,this._easing)}__call__(t){return jn((t=>this.at(t)))(In(this._subject,t))}}const lo=[];function fo(){return new Tn((t=>{const e=o(),r=r=>t.next(r-e);return lo.push(r),()=>{const t=lo.indexOf(r);lo.splice(t,1)}}))}!function t(){window.requestAnimationFrame(t);const e=o();for(let t=lo.length,r=0;r<t;r++){const t=lo[r];t&&t(e)}}();const ho={duration:1e3,easing:"cubicOut"};class po extends Mn{static create(t){return new po(t)}constructor(t){super((t=>{const e=e=>t.next(e);return this.on("update",e),this.emit("update",this._time),()=>this.off("update",e)})),this.totalTime=Xi(t),this._clockTime=0,this._time=0,this.playbackRate=1,this._paused=!0,this._loop=!1,this._sub=fo().subscribe((t=>this.step(t)))}get progress(){return this.totalTime>0?this._time/this.totalTime*100:0}set progress(t){this.seek(Math.max(0,t)*this.totalTime/100)}get time(){return this._time}set time(t){this.seek(t)}get paused(){return this._paused}set paused(t){this.togglePause(t)}destroy(){this.off(!0),this._sub.unsubscribe(),this.emit("destroy")}togglePause(t){return void 0===t&&(t=!this._paused),this._paused=!!t,this._paused?this.emit("pause"):this.emit("play"),this.emit("togglePause",this._paused),this}pause(){return this.togglePause(!0)}play(){return this.togglePause(!1)}loop(t=!0){return this._loop=t,this}playTo(t){return this._time===t?this:(this._playToTime=t,this._oldPlaybackRate=this.playbackRate,this.playbackRate=t>=this._time?1:-1,this.play())}seek(t){return this._time=t,this.emit("update",t),this.emit("seek",t),this}step(t){const e=this._clockTime,r=this.playbackRate,n=t-e;let i=this._time;const o=this.totalTime;return this._clockTime=t,this._paused||(i+=n*r,!1!==this._playToTime&&r*i>=r*this._playToTime&&(this.togglePause(!0),i=this._playToTime,this.playbackRate=this._oldPlaybackRate,this._playToTime=!1),this._time=i,r>0&&i>=o?(this._time=o,this.emit("update",i),this._loop?(this.emit("end"),this.seek(0)):(this.togglePause(!0),this.emit("end"))):r<0&&i<=0?(this._time=0,this.emit("update",i),this._loop?(this.emit("end"),this.seek(o)):(this.togglePause(!0),this.emit("end"))):this.emit("update",i)),this}}const mo=(t,e=!1)=>r=>new Tn((n=>{let i=!1,o=null,s=!1;const u=t.subscribe({next:()=>{e&&!i||(n.next(o),i=!1,s&&(n.complete(),u.unsubscribe()))},complete:()=>{n.complete()},error:t=>{n.error(t)}}),a=r.subscribe({next:t=>{o=t,i=!0},complete:()=>{s=!0},error:t=>{n.error(t),i=!1,o=null,u.unsubscribe()}});return()=>{a.unsubscribe(),u.unsubscribe()}}));var bo=Object.freeze({__proto__:null,parseTime:Xi,parseEasing:Di,parseInterpolator:Ci});t.Easing=wi,t.Interpolators=Li,t.Meddle=co,t.Observable=Tn,t.Parsers=bo,t.Player=po,t.Smoothen=function(t,e,r=null){return t instanceof Function&&(e=t,t=ho),t=Object.assign({},ho,t),n=>new Tn((i=>{const o=[];let s,u,a=0;const l=Di(t.easing);e||(e=()=>u);let f=null;const h=fo().subscribe((n=>{f&&((n=>{if(!s&&(s=Vi(r||e()||n),u=Hi(s),!r))return;const i=o.length,c=i?o[i-1].targetState:{...e()};o.push({startTime:a,endTime:a+Xi(t.duration),startState:c,targetState:n})})(f),f=null);const h=(t=>{if(a=t,!o.length)return null;let e=1;const r=o.map((({startTime:t,endTime:r})=>{if(0===e)return 0;const n=c(t,r,a)/e;return e=l(n),n}));for(u=r.reduceRight(((t,e,r)=>{const{startState:n}=o[r];return eo(s,n,t,e,l)}),o[o.length-1].targetState);o[0]?.endTime<=a;)o.shift();return u})(n);h&&i.next(h)})),p=n.subscribe({next:t=>{f=t},error:t=>i.error(t),complete:()=>i.complete()});return{unsubscribe:()=>{h.unsubscribe(),p.unsubscribe()}}}))},t.Subject=Sn,t.Tween=uo,t.Util=An,t.animationFrames=fo,t.animationSync=(t={})=>e=>new Tn((r=>{let n=0,i=!1,o=!1,s=0,u=0,a=!0;const c=fo().subscribe((e=>{const l=Number.isFinite(t.playbackRate)?t.playbackRate:1,f=!a&&0!==l,h=t.threshold||83.33333333333333;let p=e;if(f){p=u+(e-s)*l,Math.abs(p-n)>h&&(i?p=n:a=!0),i=!1}else p=i?n:u;s=e,p!==u&&(u=p,r.next(p)),o&&(r.complete(),c.unsubscribe())})),l=e.subscribe({next:t=>{a=t===n,n=t,i=!0},complete:()=>{o=!0},error:t=>{r.error(t),c.unsubscribe()}});return()=>{l.unsubscribe(),c.unsubscribe()}})),t.animationThrottle=()=>t=>mo(fo(),!0)(t),t.combineLatest=xn,t.interpolateProperty=to,t.map=jn,t.merge=In,t.pipe=O,t.pipeFromArray=w,t.registerType=function(t){const{type:e,interpolator:r}=t;if(!e||!r||void 0===t.default)throw new Error('Custom types must have "type", "default", and "interpolator" specified');if(Fi[e])throw new Error(`Custom type "${e}" is already registered`);Fi[e]={type:e,interpolator:r,default:t.default},t.default.constructor&&(Fi[e].constructor=t.default.constructor)},t.regulatedBy=mo,t.spreadAssign=(...t)=>e=>O(jn((t=>Object.assign({},...t))))(En(...t)(e)),t.spreadCombineLatest=En,t.zip=function(...t){return new Tn((e=>{if(0===t.length)return Tn.from([]);const r=t.map((()=>[]));function n(){return r.some(((t,e)=>0===t.length&&i[e].closed))}const i=t.map(((t,i)=>Tn.from(t).subscribe({next(t){r[i].push(t),r.every((t=>t.length>0))&&(e.next(r.map((t=>t.shift()))),n()&&e.complete())},error(t){e.error(t)},complete(){n()&&e.complete()}})));return()=>i.forEach((t=>t.unsubscribe()))}))},Object.defineProperty(t,"__esModule",{value:!0})}));
